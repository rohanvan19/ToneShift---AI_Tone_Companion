{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = useOptionsGetters;\nvar React = _interopRequireWildcard(require(\"react\"));\nvar _NavigationBuilderContext = _interopRequireDefault(require(\"./NavigationBuilderContext\"));\nvar _NavigationStateContext = _interopRequireDefault(require(\"./NavigationStateContext\"));\nfunction _interopRequireWildcard(e, t) {\n  if (\"function\" == typeof WeakMap) var r = new WeakMap(),\n    n = new WeakMap();\n  return (_interopRequireWildcard = function _interopRequireWildcard(e, t) {\n    if (!t && e && e.__esModule) return e;\n    var o,\n      i,\n      f = {\n        __proto__: null,\n        \"default\": e\n      };\n    if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return f;\n    if (o = t ? n : r) {\n      if (o.has(e)) return o.get(e);\n      o.set(e, f);\n    }\n    for (var _t2 in e) \"default\" !== _t2 && {}.hasOwnProperty.call(e, _t2) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t2)) && (i.get || i.set) ? o(f, _t2, i) : f[_t2] = e[_t2]);\n    return f;\n  })(e, t);\n}\nfunction useOptionsGetters(_ref) {\n  var key = _ref.key,\n    options = _ref.options,\n    navigation = _ref.navigation;\n  var optionsRef = React.useRef(options);\n  var optionsGettersFromChildRef = React.useRef({});\n  var _React$useContext = React.useContext(_NavigationBuilderContext[\"default\"]),\n    onOptionsChange = _React$useContext.onOptionsChange;\n  var _React$useContext2 = React.useContext(_NavigationStateContext[\"default\"]),\n    parentAddOptionsGetter = _React$useContext2.addOptionsGetter;\n  var optionsChangeListener = React.useCallback(function () {\n    var _ref2;\n    var isFocused = (_ref2 = navigation === null || navigation === void 0 ? void 0 : navigation.isFocused()) !== null && _ref2 !== void 0 ? _ref2 : true;\n    var hasChildren = Object.keys(optionsGettersFromChildRef.current).length;\n    if (isFocused && !hasChildren) {\n      var _optionsRef$current;\n      onOptionsChange((_optionsRef$current = optionsRef.current) !== null && _optionsRef$current !== void 0 ? _optionsRef$current : {});\n    }\n  }, [navigation, onOptionsChange]);\n  React.useEffect(function () {\n    optionsRef.current = options;\n    optionsChangeListener();\n    return navigation === null || navigation === void 0 ? void 0 : navigation.addListener('focus', optionsChangeListener);\n  }, [navigation, options, optionsChangeListener]);\n  var getOptionsFromListener = React.useCallback(function () {\n    for (var _key2 in optionsGettersFromChildRef.current) {\n      if (optionsGettersFromChildRef.current.hasOwnProperty(_key2)) {\n        var _optionsGettersFromCh, _optionsGettersFromCh2;\n        var result = (_optionsGettersFromCh = (_optionsGettersFromCh2 = optionsGettersFromChildRef.current)[_key2]) === null || _optionsGettersFromCh === void 0 ? void 0 : _optionsGettersFromCh.call(_optionsGettersFromCh2);\n        if (result !== null) {\n          return result;\n        }\n      }\n    }\n    return null;\n  }, []);\n  var getCurrentOptions = React.useCallback(function () {\n    var _ref3;\n    var isFocused = (_ref3 = navigation === null || navigation === void 0 ? void 0 : navigation.isFocused()) !== null && _ref3 !== void 0 ? _ref3 : true;\n    if (!isFocused) {\n      return null;\n    }\n    var optionsFromListener = getOptionsFromListener();\n    if (optionsFromListener !== null) {\n      return optionsFromListener;\n    }\n    return optionsRef.current;\n  }, [navigation, getOptionsFromListener]);\n  React.useEffect(function () {\n    return parentAddOptionsGetter === null || parentAddOptionsGetter === void 0 ? void 0 : parentAddOptionsGetter(key, getCurrentOptions);\n  }, [getCurrentOptions, parentAddOptionsGetter, key]);\n  var addOptionsGetter = React.useCallback(function (key, getter) {\n    optionsGettersFromChildRef.current[key] = getter;\n    optionsChangeListener();\n    return function () {\n      delete optionsGettersFromChildRef.current[key];\n      optionsChangeListener();\n    };\n  }, [optionsChangeListener]);\n  return {\n    addOptionsGetter: addOptionsGetter,\n    getCurrentOptions: getCurrentOptions\n  };\n}","map":{"version":3,"names":["React","_interopRequireWildcard","require","_NavigationBuilderContext","_interopRequireDefault","_NavigationStateContext","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof","has","get","set","_t2","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","useOptionsGetters","_ref","key","options","navigation","optionsRef","useRef","optionsGettersFromChildRef","_React$useContext","useContext","onOptionsChange","_React$useContext2","parentAddOptionsGetter","addOptionsGetter","optionsChangeListener","useCallback","_ref2","isFocused","hasChildren","keys","current","length","_optionsRef$current","useEffect","addListener","getOptionsFromListener","_key2","_optionsGettersFromCh","_optionsGettersFromCh2","result","getCurrentOptions","_ref3","optionsFromListener","getter"],"sources":["C:\\Users\\vanma\\StudioProjects\\ToneShift\\toneshift-frontend\\node_modules\\@react-navigation\\core\\src\\useOptionsGetters.tsx"],"sourcesContent":["import type { ParamListBase } from '@react-navigation/routers';\nimport * as React from 'react';\n\nimport NavigationBuilderContext from './NavigationBuilderContext';\nimport NavigationStateContext from './NavigationStateContext';\nimport type { NavigationProp } from './types';\n\ntype Options = {\n  key?: string;\n  navigation?: NavigationProp<ParamListBase>;\n  options?: object | undefined;\n};\n\nexport default function useOptionsGetters({\n  key,\n  options,\n  navigation,\n}: Options) {\n  const optionsRef = React.useRef<object | undefined>(options);\n  const optionsGettersFromChildRef = React.useRef<\n    Record<string, () => object | undefined | null>\n  >({});\n\n  const { onOptionsChange } = React.useContext(NavigationBuilderContext);\n  const { addOptionsGetter: parentAddOptionsGetter } = React.useContext(\n    NavigationStateContext\n  );\n\n  const optionsChangeListener = React.useCallback(() => {\n    const isFocused = navigation?.isFocused() ?? true;\n    const hasChildren = Object.keys(optionsGettersFromChildRef.current).length;\n\n    if (isFocused && !hasChildren) {\n      onOptionsChange(optionsRef.current ?? {});\n    }\n  }, [navigation, onOptionsChange]);\n\n  React.useEffect(() => {\n    optionsRef.current = options;\n    optionsChangeListener();\n\n    return navigation?.addListener('focus', optionsChangeListener);\n  }, [navigation, options, optionsChangeListener]);\n\n  const getOptionsFromListener = React.useCallback(() => {\n    for (let key in optionsGettersFromChildRef.current) {\n      if (optionsGettersFromChildRef.current.hasOwnProperty(key)) {\n        const result = optionsGettersFromChildRef.current[key]?.();\n\n        // null means unfocused route\n        if (result !== null) {\n          return result;\n        }\n      }\n    }\n\n    return null;\n  }, []);\n\n  const getCurrentOptions = React.useCallback(() => {\n    const isFocused = navigation?.isFocused() ?? true;\n\n    if (!isFocused) {\n      return null;\n    }\n\n    const optionsFromListener = getOptionsFromListener();\n\n    if (optionsFromListener !== null) {\n      return optionsFromListener;\n    }\n\n    return optionsRef.current;\n  }, [navigation, getOptionsFromListener]);\n\n  React.useEffect(() => {\n    return parentAddOptionsGetter?.(key!, getCurrentOptions);\n  }, [getCurrentOptions, parentAddOptionsGetter, key]);\n\n  const addOptionsGetter = React.useCallback(\n    (key: string, getter: () => object | undefined | null) => {\n      optionsGettersFromChildRef.current[key] = getter;\n      optionsChangeListener();\n\n      return () => {\n        // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n        delete optionsGettersFromChildRef.current[key];\n        optionsChangeListener();\n      };\n    },\n    [optionsChangeListener]\n  );\n\n  return {\n    addOptionsGetter,\n    getCurrentOptions,\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}