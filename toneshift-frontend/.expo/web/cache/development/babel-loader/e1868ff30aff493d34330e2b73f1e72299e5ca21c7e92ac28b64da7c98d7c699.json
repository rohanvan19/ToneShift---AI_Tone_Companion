{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useTheme = exports.ThemeProvider = exports.ThemeContext = void 0;\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _useColorScheme = _interopRequireDefault(require(\"react-native-web/dist/exports/useColorScheme\"));\nvar _auth = require(\"./auth\");\nvar _theme = require(\"./theme\");\nvar _jsxDevRuntime = require(\"react/jsx-dev-runtime\");\nvar _jsxFileName = \"C:\\\\Users\\\\vanma\\\\StudioProjects\\\\ToneShift\\\\toneshift-frontend\\\\utils\\\\ThemeContext.js\",\n  _this = void 0;\nfunction _interopRequireWildcard(e, t) {\n  if (\"function\" == typeof WeakMap) var r = new WeakMap(),\n    n = new WeakMap();\n  return (_interopRequireWildcard = function _interopRequireWildcard(e, t) {\n    if (!t && e && e.__esModule) return e;\n    var o,\n      i,\n      f = {\n        __proto__: null,\n        \"default\": e\n      };\n    if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return f;\n    if (o = t ? n : r) {\n      if (o.has(e)) return o.get(e);\n      o.set(e, f);\n    }\n    for (var _t2 in e) \"default\" !== _t2 && {}.hasOwnProperty.call(e, _t2) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t2)) && (i.get || i.set) ? o(f, _t2, i) : f[_t2] = e[_t2]);\n    return f;\n  })(e, t);\n}\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      (0, _defineProperty2[\"default\"])(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nvar ThemeContext = exports.ThemeContext = (0, _react.createContext)({\n  theme: _theme.lightTheme,\n  isDarkMode: false,\n  toggleTheme: function toggleTheme() {}\n});\nvar ThemeProvider = exports.ThemeProvider = function ThemeProvider(_ref) {\n  var children = _ref.children;\n  var _useContext = (0, _react.useContext)(_auth.AuthContext),\n    userData = _useContext.userData,\n    updateUserData = _useContext.updateUserData;\n  var deviceColorScheme = (0, _useColorScheme[\"default\"])();\n  var _useState = (0, _react.useState)(function () {\n      var _userData$preferences;\n      if ((userData === null || userData === void 0 || (_userData$preferences = userData.preferences) === null || _userData$preferences === void 0 ? void 0 : _userData$preferences.darkMode) !== undefined) {\n        return userData.preferences.darkMode;\n      }\n      return deviceColorScheme === 'dark';\n    }),\n    _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n    isDarkMode = _useState2[0],\n    setIsDarkMode = _useState2[1];\n  var theme = isDarkMode ? _theme.darkTheme : _theme.lightTheme;\n  var toggleTheme = function () {\n    var _ref2 = (0, _asyncToGenerator2[\"default\"])(_regenerator[\"default\"].mark(function _callee() {\n      var newMode, updatedPreferences;\n      return _regenerator[\"default\"].wrap(function (_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            newMode = !isDarkMode;\n            setIsDarkMode(newMode);\n            if (userData) {\n              updatedPreferences = _objectSpread(_objectSpread({}, userData.preferences), {}, {\n                darkMode: newMode\n              });\n              updateUserData({\n                preferences: updatedPreferences\n              });\n            }\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n    return function toggleTheme() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  (0, _react.useEffect)(function () {\n    var _userData$preferences2;\n    if ((userData === null || userData === void 0 || (_userData$preferences2 = userData.preferences) === null || _userData$preferences2 === void 0 ? void 0 : _userData$preferences2.darkMode) !== undefined) {\n      setIsDarkMode(userData.preferences.darkMode);\n    }\n  }, [userData]);\n  return (0, _jsxDevRuntime.jsxDEV)(ThemeContext.Provider, {\n    value: {\n      theme: theme,\n      isDarkMode: isDarkMode,\n      toggleTheme: toggleTheme\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, _this);\n};\nvar useTheme = exports.useTheme = function useTheme() {\n  return (0, _react.useContext)(ThemeContext);\n};","map":{"version":3,"names":["_react","_interopRequireWildcard","require","_useColorScheme","_interopRequireDefault","_auth","_theme","_jsxDevRuntime","_jsxFileName","_this","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof","has","get","set","_t2","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","ownKeys","keys","getOwnPropertySymbols","filter","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty2","getOwnPropertyDescriptors","defineProperties","ThemeContext","exports","createContext","theme","lightTheme","isDarkMode","toggleTheme","ThemeProvider","_ref","children","_useContext","useContext","AuthContext","userData","updateUserData","deviceColorScheme","_useState","useState","_userData$preferences","preferences","darkMode","undefined","_useState2","_slicedToArray2","setIsDarkMode","darkTheme","_ref2","_asyncToGenerator2","_regenerator","mark","_callee","newMode","updatedPreferences","wrap","_context","prev","next","stop","useEffect","_userData$preferences2","jsxDEV","Provider","value","fileName","lineNumber","columnNumber","useTheme"],"sources":["C:/Users/vanma/StudioProjects/ToneShift/toneshift-frontend/utils/ThemeContext.js"],"sourcesContent":["import React, { createContext, useState, useEffect, useContext } from 'react';\r\nimport { useColorScheme } from 'react-native';\r\nimport { AuthContext } from './auth';\r\nimport { lightTheme, darkTheme } from './theme';\r\n\r\nexport const ThemeContext = createContext({\r\n  theme: lightTheme,\r\n  isDarkMode: false,\r\n  toggleTheme: () => {},\r\n});\r\n\r\nexport const ThemeProvider = ({ children }) => {\r\n  const { userData, updateUserData } = useContext(AuthContext);\r\n  const deviceColorScheme = useColorScheme();\r\n  \r\n  // Initialize with user preference or device setting\r\n  const [isDarkMode, setIsDarkMode] = useState(() => {\r\n    if (userData?.preferences?.darkMode !== undefined) {\r\n      return userData.preferences.darkMode;\r\n    }\r\n    return deviceColorScheme === 'dark';\r\n  });\r\n\r\n  const theme = isDarkMode ? darkTheme : lightTheme;\r\n\r\n  const toggleTheme = async () => {\r\n    const newMode = !isDarkMode;\r\n    setIsDarkMode(newMode);\r\n    \r\n    // Save preference if user is logged in\r\n    if (userData) {\r\n      const updatedPreferences = {\r\n        ...userData.preferences,\r\n        darkMode: newMode,\r\n      };\r\n      \r\n      updateUserData({ \r\n        preferences: updatedPreferences \r\n      });\r\n    }\r\n  };\r\n\r\n  // Update theme when user data changes\r\n  useEffect(() => {\r\n    if (userData?.preferences?.darkMode !== undefined) {\r\n      setIsDarkMode(userData.preferences.darkMode);\r\n    }\r\n  }, [userData]);\r\n\r\n  return (\r\n    <ThemeContext.Provider value={{ theme, isDarkMode, toggleTheme }}>\r\n      {children}\r\n    </ThemeContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useTheme = () => useContext(ThemeContext);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}