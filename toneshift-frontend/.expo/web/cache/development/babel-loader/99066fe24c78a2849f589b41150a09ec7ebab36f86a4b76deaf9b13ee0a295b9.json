{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.toneApi = exports.responseApi = exports.relationshipApi = exports[\"default\"] = exports.conversationApi = exports.authApi = void 0;\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar axiosModule = _interopRequireWildcard(require(\"axios\"));\nvar _asyncStorage = _interopRequireDefault(require(\"@react-native-async-storage/async-storage\"));\nfunction _interopRequireWildcard(e, t) {\n  if (\"function\" == typeof WeakMap) var r = new WeakMap(),\n    n = new WeakMap();\n  return (_interopRequireWildcard = function _interopRequireWildcard(e, t) {\n    if (!t && e && e.__esModule) return e;\n    var o,\n      i,\n      f = {\n        __proto__: null,\n        \"default\": e\n      };\n    if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return f;\n    if (o = t ? n : r) {\n      if (o.has(e)) return o.get(e);\n      o.set(e, f);\n    }\n    for (var _t2 in e) \"default\" !== _t2 && {}.hasOwnProperty.call(e, _t2) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t2)) && (i.get || i.set) ? o(f, _t2, i) : f[_t2] = e[_t2]);\n    return f;\n  })(e, t);\n}\nvar axios = axiosModule[\"default\"] || axiosModule;\nvar API_URL = 'http://localhost:5000/api';\nvar api = axios.create({\n  baseURL: API_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\napi.interceptors.request.use(function () {\n  var _ref = (0, _asyncToGenerator2[\"default\"])(_regenerator[\"default\"].mark(function _callee(config) {\n    var token;\n    return _regenerator[\"default\"].wrap(function (_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 1;\n          return _asyncStorage[\"default\"].getItem('token');\n        case 1:\n          token = _context.sent;\n          console.log('API Request to:', config.url);\n          console.log('Token available:', token ? 'YES' : 'NO');\n          if (token) {\n            config.headers.Authorization = \"Bearer \".concat(token);\n            console.log('Authorization header set');\n          }\n          return _context.abrupt(\"return\", config);\n        case 2:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}(), function (error) {\n  return Promise.reject(error);\n});\napi.interceptors.response.use(function (response) {\n  console.log('API Response status:', response.status);\n  return response;\n}, function (error) {\n  var _error$response, _error$response2;\n  console.error('API Error:', (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status, (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data);\n  return Promise.reject(error);\n});\nvar authApi = exports.authApi = {\n  register: function register(userData) {\n    return api.post('/users/register', userData);\n  },\n  login: function login(credentials) {\n    return api.post('/users/login', credentials);\n  },\n  getProfile: function getProfile() {\n    return api.get('/users/profile');\n  },\n  updateProfile: function updateProfile(data) {\n    return api.put('/users/profile', data);\n  }\n};\nvar conversationApi = exports.conversationApi = {\n  getAll: function getAll() {\n    return api.get('/conversations');\n  },\n  getById: function getById(id) {\n    return api.get(\"/conversations/\".concat(id));\n  },\n  create: function create(data) {\n    return api.post('/conversations', data);\n  },\n  update: function update(id, data) {\n    return api.put(\"/conversations/\".concat(id), data);\n  },\n  \"delete\": function _delete(id) {\n    return api[\"delete\"](\"/conversations/\".concat(id));\n  },\n  addMessage: function addMessage(id, data) {\n    return api.post(\"/conversations/\".concat(id, \"/messages\"), data);\n  }\n};\nvar relationshipApi = exports.relationshipApi = {\n  getAll: function getAll() {\n    return api.get('/relationships');\n  },\n  getById: function getById(id) {\n    return api.get(\"/relationships/\".concat(id));\n  },\n  create: function create(data) {\n    return api.post('/relationships', data);\n  },\n  update: function update(id, data) {\n    return api.put(\"/relationships/\".concat(id), data);\n  },\n  \"delete\": function _delete(id) {\n    return api[\"delete\"](\"/relationships/\".concat(id));\n  }\n};\nvar toneApi = exports.toneApi = {\n  getAll: function getAll() {\n    return api.get('/tones');\n  },\n  create: function create(data) {\n    return api.post('/tones', data);\n  },\n  update: function update(id, data) {\n    return api.put(\"/tones/\".concat(id), data);\n  },\n  \"delete\": function _delete(id) {\n    return api[\"delete\"](\"/tones/\".concat(id));\n  },\n  getPreferred: function getPreferred() {\n    return api.get('/tones/preferred');\n  },\n  updatePreferred: function updatePreferred(data) {\n    return api.put('/tones/preferred', data);\n  }\n};\nvar responseApi = exports.responseApi = {\n  generate: function generate(data) {\n    return api.post('/responses/generate', data);\n  },\n  generateMultiple: function generateMultiple(data) {\n    return api.post('/responses/generate-multiple', data);\n  },\n  generateAndSave: function generateAndSave(data) {\n    return api.post('/responses/generate-and-save', data);\n  }\n};\nvar _default = exports[\"default\"] = api;","map":{"version":3,"names":["axiosModule","_interopRequireWildcard","require","_asyncStorage","_interopRequireDefault","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof","has","get","set","_t2","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","axios","API_URL","api","create","baseURL","headers","interceptors","request","use","_ref","_asyncToGenerator2","_regenerator","mark","_callee","config","token","wrap","_context","prev","next","getItem","sent","console","log","url","Authorization","concat","abrupt","stop","_x","apply","arguments","error","Promise","reject","response","status","_error$response","_error$response2","data","authApi","exports","register","userData","post","login","credentials","getProfile","updateProfile","put","conversationApi","getAll","getById","id","update","_delete","addMessage","relationshipApi","toneApi","getPreferred","updatePreferred","responseApi","generate","generateMultiple","generateAndSave","_default"],"sources":["C:/Users/vanma/StudioProjects/ToneShift/toneshift-frontend/utils/api.js"],"sourcesContent":["import * as axiosModule from 'axios';\r\nconst axios = axiosModule.default || axiosModule;\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\n\r\n// Base URL for API requests\r\n\r\nconst API_URL = 'http://localhost:5000/api';\r\n\r\n// Create axios instance\r\nconst api = axios.create({\r\n  baseURL: API_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\n// Add request interceptor to include token in headers\r\napi.interceptors.request.use(\r\n  async (config) => {\r\n    const token = await AsyncStorage.getItem('token');\r\n    console.log('API Request to:', config.url);\r\n    console.log('Token available:', token ? 'YES' : 'NO');\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n      console.log('Authorization header set');\r\n    }\r\n    return config;\r\n  },\r\n  (error) => Promise.reject(error)\r\n);\r\n\r\napi.interceptors.response.use(\r\n  (response) => {\r\n    console.log('API Response status:', response.status);\r\n    return response;\r\n  },\r\n  (error) => {\r\n    console.error('API Error:', error.response?.status, error.response?.data);\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport const authApi = {\r\n  register: (userData) => api.post('/users/register', userData),\r\n  login: (credentials) => api.post('/users/login', credentials),\r\n  getProfile: () => api.get('/users/profile'),\r\n  updateProfile: (data) => api.put('/users/profile', data),\r\n};\r\n\r\nexport const conversationApi = {\r\n  getAll: () => api.get('/conversations'),\r\n  getById: (id) => api.get(`/conversations/${id}`),\r\n  create: (data) => api.post('/conversations', data),\r\n  update: (id, data) => api.put(`/conversations/${id}`, data),\r\n  delete: (id) => api.delete(`/conversations/${id}`),\r\n  addMessage: (id, data) => api.post(`/conversations/${id}/messages`, data),\r\n};\r\n\r\nexport const relationshipApi = {\r\n  getAll: () => api.get('/relationships'),\r\n  getById: (id) => api.get(`/relationships/${id}`),\r\n  create: (data) => api.post('/relationships', data),\r\n  update: (id, data) => api.put(`/relationships/${id}`, data),\r\n  delete: (id) => api.delete(`/relationships/${id}`),\r\n};\r\n\r\nexport const toneApi = {\r\n  getAll: () => api.get('/tones'),\r\n  create: (data) => api.post('/tones', data),\r\n  update: (id, data) => api.put(`/tones/${id}`, data),\r\n  delete: (id) => api.delete(`/tones/${id}`),\r\n  getPreferred: () => api.get('/tones/preferred'),\r\n  updatePreferred: (data) => api.put('/tones/preferred', data),\r\n};\r\n\r\nexport const responseApi = {\r\n  generate: (data) => api.post('/responses/generate', data),\r\n  generateMultiple: (data) => api.post('/responses/generate-multiple', data),\r\n  generateAndSave: (data) => api.post('/responses/generate-and-save', data),\r\n};\r\n\r\nexport default api;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}