{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _View = _interopRequireDefault(require(\"react-native-web/dist/exports/View\"));\nvar _StyleSheet = _interopRequireDefault(require(\"react-native-web/dist/exports/StyleSheet\"));\nvar _FlatList = _interopRequireDefault(require(\"react-native-web/dist/exports/FlatList\"));\nvar _TouchableOpacity = _interopRequireDefault(require(\"react-native-web/dist/exports/TouchableOpacity\"));\nvar _reactNativePaper = require(\"react-native-paper\");\nvar _reactNativeSafeAreaContext = require(\"react-native-safe-area-context\");\nvar _api = require(\"../../utils/api\");\nvar _asyncStorage = _interopRequireDefault(require(\"@react-native-async-storage/async-storage\"));\nvar _ThemeContext = require(\"../../utils/ThemeContext\");\nvar _jsxDevRuntime = require(\"react/jsx-dev-runtime\");\nvar _jsxFileName = \"C:\\\\Users\\\\vanma\\\\StudioProjects\\\\ToneShift\\\\toneshift-frontend\\\\screens\\\\conversation\\\\ConversationListScreen.js\",\n  _this = void 0;\nfunction _interopRequireWildcard(e, t) {\n  if (\"function\" == typeof WeakMap) var r = new WeakMap(),\n    n = new WeakMap();\n  return (_interopRequireWildcard = function _interopRequireWildcard(e, t) {\n    if (!t && e && e.__esModule) return e;\n    var o,\n      i,\n      f = {\n        __proto__: null,\n        \"default\": e\n      };\n    if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return f;\n    if (o = t ? n : r) {\n      if (o.has(e)) return o.get(e);\n      o.set(e, f);\n    }\n    for (var _t4 in e) \"default\" !== _t4 && {}.hasOwnProperty.call(e, _t4) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t4)) && (i.get || i.set) ? o(f, _t4, i) : f[_t4] = e[_t4]);\n    return f;\n  })(e, t);\n}\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      (0, _defineProperty2[\"default\"])(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nvar ConversationListScreen = function ConversationListScreen(_ref) {\n  var navigation = _ref.navigation;\n  var _useTheme = (0, _ThemeContext.useTheme)(),\n    theme = _useTheme.theme;\n  var colors = theme.colors,\n    spacing = theme.spacing,\n    fonts = theme.fonts,\n    shadows = theme.shadows,\n    borderRadius = theme.borderRadius;\n  var styles = _StyleSheet[\"default\"].create({\n    container: {\n      flex: 1,\n      backgroundColor: colors.background\n    },\n    centered: {\n      flex: 1,\n      justifyContent: 'center',\n      alignItems: 'center',\n      padding: spacing.l\n    },\n    searchContainer: {\n      margin: spacing.m\n    },\n    searchBar: _objectSpread({\n      backgroundColor: colors.surface,\n      borderRadius: borderRadius.large,\n      height: 50\n    }, shadows.small),\n    listContent: {\n      padding: spacing.m,\n      paddingBottom: spacing.xxxl\n    },\n    card: _objectSpread(_objectSpread({\n      marginBottom: spacing.m,\n      backgroundColor: colors.card,\n      borderRadius: borderRadius.large,\n      overflow: 'hidden'\n    }, shadows.medium), {}, {\n      borderWidth: 1,\n      borderColor: colors.border\n    }),\n    conversationTitle: _objectSpread(_objectSpread({}, fonts.semiBold), {}, {\n      fontSize: fonts.sizes.large,\n      marginBottom: spacing.xs,\n      color: colors.text\n    }),\n    lastMessage: _objectSpread(_objectSpread({}, fonts.regular), {}, {\n      color: colors.textSecondary,\n      marginBottom: spacing.s,\n      lineHeight: 20\n    }),\n    timestamp: _objectSpread(_objectSpread({}, fonts.medium), {}, {\n      color: colors.textSecondary,\n      fontSize: fonts.sizes.xs,\n      alignSelf: 'flex-end'\n    }),\n    errorText: {\n      color: colors.error,\n      textAlign: 'center',\n      marginBottom: spacing.m\n    },\n    retryButton: {\n      padding: spacing.m,\n      backgroundColor: colors.primary,\n      borderRadius: borderRadius.medium\n    },\n    retryText: _objectSpread({\n      color: '#fff'\n    }, fonts.medium),\n    emptyContainer: {\n      flex: 1,\n      justifyContent: 'center',\n      alignItems: 'center',\n      padding: spacing.l\n    },\n    emptyText: _objectSpread(_objectSpread({}, fonts.medium), {}, {\n      fontSize: fonts.sizes.large,\n      marginBottom: spacing.s,\n      color: colors.text\n    }),\n    emptySubtext: {\n      color: colors.textSecondary,\n      textAlign: 'center'\n    },\n    fab: _objectSpread(_objectSpread({\n      position: 'absolute',\n      margin: spacing.m,\n      right: 0,\n      bottom: 0,\n      backgroundColor: colors.primary,\n      borderRadius: borderRadius.round\n    }, shadows.large), {}, {\n      width: 60,\n      height: 60\n    })\n  });\n  var _useState = (0, _react.useState)([]),\n    _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n    conversations = _useState2[0],\n    setConversations = _useState2[1];\n  var _useState3 = (0, _react.useState)(true),\n    _useState4 = (0, _slicedToArray2[\"default\"])(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  var _useState5 = (0, _react.useState)(null),\n    _useState6 = (0, _slicedToArray2[\"default\"])(_useState5, 2),\n    error = _useState6[0],\n    setError = _useState6[1];\n  var _useState7 = (0, _react.useState)(''),\n    _useState8 = (0, _slicedToArray2[\"default\"])(_useState7, 2),\n    searchQuery = _useState8[0],\n    setSearchQuery = _useState8[1];\n  var _useState9 = (0, _react.useState)([]),\n    _useState0 = (0, _slicedToArray2[\"default\"])(_useState9, 2),\n    filteredConversations = _useState0[0],\n    setFilteredConversations = _useState0[1];\n  (0, _react.useEffect)(function () {\n    fetchConversations();\n  }, []);\n  (0, _react.useEffect)(function () {\n    var checkAuth = function () {\n      var _ref2 = (0, _asyncToGenerator2[\"default\"])(_regenerator[\"default\"].mark(function _callee() {\n        var token;\n        return _regenerator[\"default\"].wrap(function (_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 1;\n              return _asyncStorage[\"default\"].getItem('token');\n            case 1:\n              token = _context.sent;\n              console.log('Current auth token:', token ? 'Present' : 'Not found');\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      return function checkAuth() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    checkAuth();\n  }, []);\n  (0, _react.useEffect)(function () {\n    if (conversations.length > 0) {\n      var filtered = conversations.filter(function (convo) {\n        return convo.title.toLowerCase().includes(searchQuery.toLowerCase());\n      });\n      setFilteredConversations(filtered);\n    }\n  }, [searchQuery, conversations]);\n  var fetchConversations = function () {\n    var _ref3 = (0, _asyncToGenerator2[\"default\"])(_regenerator[\"default\"].mark(function _callee2() {\n      var response, _error$response, _t;\n      return _regenerator[\"default\"].wrap(function (_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            setLoading(true);\n            console.log('Fetching conversations...');\n            _context2.prev = 1;\n            _context2.next = 2;\n            return _api.conversationApi.getAll();\n          case 2:\n            response = _context2.sent;\n            console.log('API response:', response.data);\n            setConversations(response.data.conversations || []);\n            setFilteredConversations(response.data.conversations || []);\n            setError(null);\n            _context2.next = 4;\n            break;\n          case 3:\n            _context2.prev = 3;\n            _t = _context2[\"catch\"](1);\n            console.error('Error fetching conversations:', _t);\n            console.error('Error details:', ((_error$response = _t.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || _t.message);\n            setError('Failed to load conversations. Please try again.');\n          case 4:\n            _context2.prev = 4;\n            setLoading(false);\n            return _context2.finish(4);\n          case 5:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2, null, [[1, 3, 4, 5]]);\n    }));\n    return function fetchConversations() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var handleConversationPress = function handleConversationPress(conversation) {\n    navigation.navigate('ConversationDetail', {\n      conversationId: conversation.id,\n      title: conversation.title\n    });\n  };\n  var handleCreateConversation = function () {\n    var _ref4 = (0, _asyncToGenerator2[\"default\"])(_regenerator[\"default\"].mark(function _callee3() {\n      var title, response, _t2;\n      return _regenerator[\"default\"].wrap(function (_context3) {\n        while (1) switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            title = \"New Conversation\";\n            _context3.next = 1;\n            return _api.conversationApi.create({\n              title: title,\n              context: ''\n            });\n          case 1:\n            response = _context3.sent;\n            console.log('Conversation created:', response.data);\n            _context3.next = 2;\n            return fetchConversations();\n          case 2:\n            if (response.data && response.data.conversation) {\n              navigation.navigate('ConversationDetail', {\n                conversationId: response.data.conversation.id,\n                title: response.data.conversation.title\n              });\n            }\n            _context3.next = 4;\n            break;\n          case 3:\n            _context3.prev = 3;\n            _t2 = _context3[\"catch\"](0);\n            console.error('Error creating conversation:', _t2);\n            alert('Failed to create a new conversation. Please try again.');\n          case 4:\n          case \"end\":\n            return _context3.stop();\n        }\n      }, _callee3, null, [[0, 3]]);\n    }));\n    return function handleCreateConversation() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  var renderConversationItem = function renderConversationItem(_ref5) {\n    var item = _ref5.item;\n    var lastMessage = item.messages && item.messages.length > 0 ? item.messages[item.messages.length - 1] : null;\n    var formattedDate = lastMessage ? new Date(lastMessage.timestamp).toLocaleDateString() : 'No messages yet';\n    return (0, _jsxDevRuntime.jsxDEV)(_TouchableOpacity[\"default\"], {\n      onPress: function onPress() {\n        return handleConversationPress(item);\n      },\n      children: (0, _jsxDevRuntime.jsxDEV)(_reactNativePaper.Card, {\n        style: styles.card,\n        children: (0, _jsxDevRuntime.jsxDEV)(_reactNativePaper.Card.Content, {\n          children: [(0, _jsxDevRuntime.jsxDEV)(_reactNativePaper.Text, {\n            style: styles.conversationTitle,\n            children: item.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 13\n          }, _this), (0, _jsxDevRuntime.jsxDEV)(_reactNativePaper.Text, {\n            style: styles.lastMessage,\n            children: lastMessage ? lastMessage.content.substring(0, 60) + (lastMessage.content.length > 60 ? '...' : '') : 'No messages yet'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 13\n          }, _this), (0, _jsxDevRuntime.jsxDEV)(_reactNativePaper.Text, {\n            style: styles.timestamp,\n            children: formattedDate\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 7\n    }, _this);\n  };\n  if (loading && conversations.length === 0) {\n    return (0, _jsxDevRuntime.jsxDEV)(_View[\"default\"], {\n      style: styles.centered,\n      children: (0, _jsxDevRuntime.jsxDEV)(_reactNativePaper.ActivityIndicator, {\n        size: \"large\",\n        color: colors.primary\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 7\n    }, _this);\n  }\n  if (error && conversations.length === 0) {\n    return (0, _jsxDevRuntime.jsxDEV)(_View[\"default\"], {\n      style: styles.centered,\n      children: [(0, _jsxDevRuntime.jsxDEV)(_reactNativePaper.Text, {\n        style: styles.errorText,\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 9\n      }, _this), (0, _jsxDevRuntime.jsxDEV)(_TouchableOpacity[\"default\"], {\n        onPress: fetchConversations,\n        style: styles.retryButton,\n        children: (0, _jsxDevRuntime.jsxDEV)(_reactNativePaper.Text, {\n          style: styles.retryText,\n          children: \"Retry\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 7\n    }, _this);\n  }\n  return (0, _jsxDevRuntime.jsxDEV)(_reactNativeSafeAreaContext.SafeAreaView, {\n    style: styles.container,\n    edges: ['bottom'],\n    children: [(0, _jsxDevRuntime.jsxDEV)(_View[\"default\"], {\n      style: styles.searchContainer,\n      children: (0, _jsxDevRuntime.jsxDEV)(_reactNativePaper.TextInput, {\n        placeholder: \"Search conversations...\",\n        onChangeText: setSearchQuery,\n        value: searchQuery,\n        style: styles.searchBar,\n        left: (0, _jsxDevRuntime.jsxDEV)(_reactNativePaper.TextInput.Icon, {\n          icon: \"magnify\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 17\n        }, _this),\n        mode: \"outlined\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 7\n    }, _this), filteredConversations.length === 0 ? (0, _jsxDevRuntime.jsxDEV)(_View[\"default\"], {\n      style: styles.emptyContainer,\n      children: [(0, _jsxDevRuntime.jsxDEV)(_reactNativePaper.Text, {\n        style: styles.emptyText,\n        children: \"No conversations found\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 11\n      }, _this), (0, _jsxDevRuntime.jsxDEV)(_reactNativePaper.Text, {\n        style: styles.emptySubtext,\n        children: searchQuery ? 'Try a different search term' : 'Create a new conversation to get started'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 11\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 9\n    }, _this) : (0, _jsxDevRuntime.jsxDEV)(_FlatList[\"default\"], {\n      data: filteredConversations,\n      renderItem: renderConversationItem,\n      keyExtractor: function keyExtractor(item) {\n        return item.id;\n      },\n      contentContainerStyle: styles.listContent,\n      refreshing: loading,\n      onRefresh: fetchConversations\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 9\n    }, _this), (0, _jsxDevRuntime.jsxDEV)(_reactNativePaper.FAB, {\n      style: styles.fab,\n      icon: \"plus\",\n      onPress: handleCreateConversation,\n      color: \"#fff\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 237,\n    columnNumber: 5\n  }, _this);\n};\nvar _default = exports[\"default\"] = ConversationListScreen;","map":{"version":3,"names":["_react","_interopRequireWildcard","require","_View","_interopRequireDefault","_StyleSheet","_FlatList","_TouchableOpacity","_reactNativePaper","_reactNativeSafeAreaContext","_api","_asyncStorage","_ThemeContext","_jsxDevRuntime","_jsxFileName","_this","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof","has","get","set","_t4","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","ownKeys","keys","getOwnPropertySymbols","filter","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty2","getOwnPropertyDescriptors","defineProperties","ConversationListScreen","_ref","navigation","_useTheme","useTheme","theme","colors","spacing","fonts","shadows","borderRadius","styles","create","container","flex","backgroundColor","background","centered","justifyContent","alignItems","padding","l","searchContainer","margin","m","searchBar","surface","large","height","small","listContent","paddingBottom","xxxl","card","marginBottom","overflow","medium","borderWidth","borderColor","border","conversationTitle","semiBold","fontSize","sizes","xs","color","text","lastMessage","regular","textSecondary","s","lineHeight","timestamp","alignSelf","errorText","error","textAlign","retryButton","primary","retryText","emptyContainer","emptyText","emptySubtext","fab","position","right","bottom","round","width","_useState","useState","_useState2","_slicedToArray2","conversations","setConversations","_useState3","_useState4","loading","setLoading","_useState5","_useState6","setError","_useState7","_useState8","searchQuery","setSearchQuery","_useState9","_useState0","filteredConversations","setFilteredConversations","useEffect","fetchConversations","checkAuth","_ref2","_asyncToGenerator2","_regenerator","mark","_callee","token","wrap","_context","prev","next","getItem","sent","console","log","stop","filtered","convo","title","toLowerCase","includes","_ref3","_callee2","response","_error$response","_t","_context2","conversationApi","getAll","data","message","finish","handleConversationPress","conversation","navigate","conversationId","id","handleCreateConversation","_ref4","_callee3","_t2","_context3","context","alert","renderConversationItem","_ref5","item","messages","formattedDate","Date","toLocaleDateString","jsxDEV","onPress","children","Card","style","Content","Text","fileName","lineNumber","columnNumber","content","substring","ActivityIndicator","size","SafeAreaView","edges","TextInput","placeholder","onChangeText","value","left","Icon","icon","mode","renderItem","keyExtractor","contentContainerStyle","refreshing","onRefresh","FAB","_default","exports"],"sources":["C:/Users/vanma/StudioProjects/ToneShift/toneshift-frontend/screens/conversation/ConversationListScreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { View, StyleSheet, FlatList, TouchableOpacity } from 'react-native';\r\nimport { Text, Card, FAB, ActivityIndicator, TextInput } from 'react-native-paper';\r\nimport { SafeAreaView } from 'react-native-safe-area-context';\r\nimport { conversationApi } from '../../utils/api';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { useTheme } from '../../utils/ThemeContext';\r\n\r\nconst ConversationListScreen = ({ navigation }) => {\r\n  const { theme } = useTheme();\r\n  const { colors, spacing, fonts, shadows, borderRadius } = theme;\r\n  \r\n  // Move the styles definition here, before they're used in any conditionals\r\n  const styles = StyleSheet.create({\r\n    container: {\r\n      flex: 1,\r\n      backgroundColor: colors.background,\r\n    },\r\n    centered: {\r\n      flex: 1,\r\n      justifyContent: 'center',\r\n      alignItems: 'center',\r\n      padding: spacing.l,\r\n    },\r\n    searchContainer: {\r\n      margin: spacing.m,\r\n    },\r\n    searchBar: {\r\n      backgroundColor: colors.surface,\r\n      borderRadius: borderRadius.large,\r\n      height: 50,\r\n      ...shadows.small,\r\n    },\r\n    listContent: {\r\n      padding: spacing.m,\r\n      paddingBottom: spacing.xxxl, // Extra padding for FAB\r\n    },\r\n    card: {\r\n      marginBottom: spacing.m,\r\n      backgroundColor: colors.card,\r\n      borderRadius: borderRadius.large,\r\n      overflow: 'hidden',\r\n      ...shadows.medium,\r\n      borderWidth: 1,\r\n      borderColor: colors.border,\r\n    },\r\n    conversationTitle: {\r\n      ...fonts.semiBold,\r\n      fontSize: fonts.sizes.large,\r\n      marginBottom: spacing.xs,\r\n      color: colors.text,\r\n    },\r\n    lastMessage: {\r\n      ...fonts.regular,\r\n      color: colors.textSecondary,\r\n      marginBottom: spacing.s,\r\n      lineHeight: 20,\r\n    },\r\n    timestamp: {\r\n      ...fonts.medium,\r\n      color: colors.textSecondary,\r\n      fontSize: fonts.sizes.xs,\r\n      alignSelf: 'flex-end',\r\n    },\r\n    errorText: {\r\n      color: colors.error,\r\n      textAlign: 'center',\r\n      marginBottom: spacing.m,\r\n    },\r\n    retryButton: {\r\n      padding: spacing.m,\r\n      backgroundColor: colors.primary,\r\n      borderRadius: borderRadius.medium,\r\n    },\r\n    retryText: {\r\n      color: '#fff',\r\n      ...fonts.medium,\r\n    },\r\n    emptyContainer: {\r\n      flex: 1,\r\n      justifyContent: 'center',\r\n      alignItems: 'center',\r\n      padding: spacing.l,\r\n    },\r\n    emptyText: {\r\n      ...fonts.medium,\r\n      fontSize: fonts.sizes.large,\r\n      marginBottom: spacing.s,\r\n      color: colors.text,\r\n    },\r\n    emptySubtext: {\r\n      color: colors.textSecondary,\r\n      textAlign: 'center',\r\n    },\r\n    fab: {\r\n      position: 'absolute',\r\n      margin: spacing.m,\r\n      right: 0,\r\n      bottom: 0,\r\n      backgroundColor: colors.primary,\r\n      borderRadius: borderRadius.round,\r\n      ...shadows.large,\r\n      width: 60,\r\n      height: 60,\r\n    },\r\n  });\r\n  \r\n  const [conversations, setConversations] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [filteredConversations, setFilteredConversations] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetchConversations();\r\n  }, []);\r\n\r\n  // Add this at the top of your component\r\n  useEffect(() => {\r\n    // Debug authentication\r\n    const checkAuth = async () => {\r\n      const token = await AsyncStorage.getItem('token');\r\n      console.log('Current auth token:', token ? 'Present' : 'Not found');\r\n    };\r\n    checkAuth();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (conversations.length > 0) {\r\n      const filtered = conversations.filter(convo => \r\n        convo.title.toLowerCase().includes(searchQuery.toLowerCase())\r\n      );\r\n      setFilteredConversations(filtered);\r\n    }\r\n  }, [searchQuery, conversations]);\r\n\r\n  const fetchConversations = async () => {\r\n    setLoading(true);\r\n    console.log('Fetching conversations...');\r\n    try {\r\n      const response = await conversationApi.getAll();\r\n      console.log('API response:', response.data);\r\n      setConversations(response.data.conversations || []);\r\n      setFilteredConversations(response.data.conversations || []);\r\n      setError(null);\r\n    } catch (error) {\r\n      console.error('Error fetching conversations:', error);\r\n      console.error('Error details:', error.response?.data || error.message);\r\n      setError('Failed to load conversations. Please try again.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleConversationPress = (conversation) => {\r\n    navigation.navigate('ConversationDetail', { \r\n      conversationId: conversation.id,\r\n      title: conversation.title\r\n    });\r\n  };\r\n\r\n  const handleCreateConversation = async () => {\r\n    try {\r\n      // Create a new conversation with a default title\r\n      // You could add a modal here to let the user enter a title\r\n      const title = \"New Conversation\";\r\n      const response = await conversationApi.create({\r\n        title,\r\n        context: '', // Optional context\r\n      });\r\n      \r\n      console.log('Conversation created:', response.data);\r\n      \r\n      // Refresh the conversation list\r\n      await fetchConversations();\r\n      \r\n      // Navigate to the new conversation\r\n      if (response.data && response.data.conversation) {\r\n        navigation.navigate('ConversationDetail', {\r\n          conversationId: response.data.conversation.id,\r\n          title: response.data.conversation.title\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error creating conversation:', error);\r\n      // Show error to user\r\n      alert('Failed to create a new conversation. Please try again.');\r\n    }\r\n  };\r\n\r\n  const renderConversationItem = ({ item }) => {\r\n    // Get the last message if there are any\r\n    const lastMessage = item.messages && item.messages.length > 0 \r\n      ? item.messages[item.messages.length - 1] \r\n      : null;\r\n    \r\n    // Format the date\r\n    const formattedDate = lastMessage \r\n      ? new Date(lastMessage.timestamp).toLocaleDateString() \r\n      : 'No messages yet';\r\n\r\n    return (\r\n      <TouchableOpacity onPress={() => handleConversationPress(item)}>\r\n        <Card style={styles.card}>\r\n          <Card.Content>\r\n            <Text style={styles.conversationTitle}>{item.title}</Text>\r\n            <Text style={styles.lastMessage}>\r\n              {lastMessage ? lastMessage.content.substring(0, 60) + (lastMessage.content.length > 60 ? '...' : '') : 'No messages yet'}\r\n            </Text>\r\n            <Text style={styles.timestamp}>{formattedDate}</Text>\r\n          </Card.Content>\r\n        </Card>\r\n      </TouchableOpacity>\r\n    );\r\n  };\r\n\r\n  if (loading && conversations.length === 0) {\r\n    return (\r\n      <View style={styles.centered}>\r\n        <ActivityIndicator size=\"large\" color={colors.primary} />\r\n      </View>\r\n    );\r\n  }\r\n\r\n  if (error && conversations.length === 0) {\r\n    return (\r\n      <View style={styles.centered}>\r\n        <Text style={styles.errorText}>{error}</Text>\r\n        <TouchableOpacity onPress={fetchConversations} style={styles.retryButton}>\r\n          <Text style={styles.retryText}>Retry</Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <SafeAreaView style={styles.container} edges={['bottom']}>\r\n      {/* Replace the Searchbar with a custom search input */}\r\n      <View style={styles.searchContainer}>\r\n        <TextInput\r\n          placeholder=\"Search conversations...\"\r\n          onChangeText={setSearchQuery}\r\n          value={searchQuery}\r\n          style={styles.searchBar}\r\n          left={<TextInput.Icon icon=\"magnify\" />}\r\n          mode=\"outlined\"\r\n        />\r\n      </View>\r\n      \r\n      {filteredConversations.length === 0 ? (\r\n        <View style={styles.emptyContainer}>\r\n          <Text style={styles.emptyText}>No conversations found</Text>\r\n          <Text style={styles.emptySubtext}>\r\n            {searchQuery ? 'Try a different search term' : 'Create a new conversation to get started'}\r\n          </Text>\r\n        </View>\r\n      ) : (\r\n        <FlatList\r\n          data={filteredConversations}\r\n          renderItem={renderConversationItem}\r\n          keyExtractor={(item) => item.id}\r\n          contentContainerStyle={styles.listContent}\r\n          refreshing={loading}\r\n          onRefresh={fetchConversations}\r\n        />\r\n      )}\r\n\r\n      <FAB\r\n        style={styles.fab}\r\n        icon=\"plus\"\r\n        onPress={handleCreateConversation}\r\n        color=\"#fff\"\r\n      />\r\n    </SafeAreaView>\r\n  );\r\n};\r\n\r\nexport default ConversationListScreen;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}