{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nvar _jsxFileName = \"C:\\\\Users\\\\vanma\\\\StudioProjects\\\\ToneShift\\\\toneshift-frontend\\\\screens\\\\conversation\\\\ConversationDetailScreen.js\",\n  _this = this;\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { useState, useEffect, useRef } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport { Text, TextInput, IconButton, Menu, Divider, Dialog, Portal, Button } from 'react-native-paper';\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport Icon from 'react-native-vector-icons/MaterialCommunityIcons';\nimport { conversationApi, responseApi } from '../../utils/api';\nimport MessageBubble from '../../components/conversation/MessageBubble';\nimport ToneSelector from '../../components/conversation/ToneSelector';\nimport { useTheme } from '../../utils/ThemeContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar ConversationDetailScreen = function ConversationDetailScreen(_ref) {\n  var route = _ref.route,\n    navigation = _ref.navigation;\n  var _useTheme = useTheme(),\n    theme = _useTheme.theme;\n  var colors = theme.colors,\n    spacing = theme.spacing,\n    fonts = theme.fonts,\n    shadows = theme.shadows,\n    borderRadius = theme.borderRadius;\n  var styles = StyleSheet.create({\n    container: {\n      flex: 1,\n      backgroundColor: colors.background\n    },\n    keyboardAvoid: {\n      flex: 1\n    },\n    loadingContainer: {\n      flex: 1,\n      justifyContent: 'center',\n      alignItems: 'center',\n      backgroundColor: colors.background\n    },\n    messageList: {\n      padding: spacing.m,\n      paddingBottom: spacing.xl\n    },\n    inputContainer: _objectSpread({\n      backgroundColor: colors.surface,\n      borderTopWidth: 1,\n      borderTopColor: colors.border,\n      padding: spacing.m,\n      paddingBottom: Platform.OS === 'ios' ? spacing.xl : spacing.m\n    }, shadows.medium),\n    toneContainer: {\n      marginBottom: spacing.m\n    },\n    toneLabel: _objectSpread(_objectSpread({}, fonts.semiBold), {}, {\n      color: colors.textSecondary,\n      marginBottom: spacing.xs,\n      fontSize: fonts.sizes.small\n    }),\n    toneScrollView: {\n      flexDirection: 'row',\n      paddingBottom: spacing.xs\n    },\n    toneChip: _objectSpread({\n      paddingHorizontal: spacing.m,\n      paddingVertical: spacing.s,\n      borderRadius: borderRadius.round,\n      marginRight: spacing.s,\n      backgroundColor: colors.cardAlt,\n      borderWidth: 1,\n      borderColor: colors.border,\n      elevation: 2,\n      marginBottom: spacing.xs\n    }, shadows.small),\n    selectedToneChip: {\n      backgroundColor: colors.primary,\n      borderColor: colors.primaryDark,\n      elevation: 4\n    },\n    toneChipText: _objectSpread(_objectSpread({}, fonts.semiBold), {}, {\n      color: colors.textSecondary,\n      fontSize: fonts.sizes.small\n    }),\n    selectedToneChipText: {\n      color: '#fff'\n    },\n    inputRow: {\n      flexDirection: 'row',\n      alignItems: 'flex-end'\n    },\n    input: _objectSpread(_objectSpread({\n      flex: 1,\n      maxHeight: 120,\n      backgroundColor: colors.surface,\n      borderWidth: 1,\n      borderColor: colors.border,\n      borderRadius: borderRadius.large,\n      paddingHorizontal: spacing.m,\n      paddingTop: spacing.s,\n      paddingBottom: spacing.s,\n      color: colors.text\n    }, fonts.regular), {}, {\n      fontSize: fonts.sizes.medium\n    }, shadows.small),\n    sendButton: _objectSpread(_objectSpread({\n      margin: 0,\n      marginLeft: spacing.s,\n      backgroundColor: colors.primary,\n      borderRadius: borderRadius.round,\n      elevation: 4\n    }, shadows.small), {}, {\n      width: 48,\n      height: 48,\n      justifyContent: 'center',\n      alignItems: 'center'\n    }),\n    dialogInput: {\n      backgroundColor: colors.surface,\n      borderRadius: borderRadius.medium,\n      marginTop: spacing.s,\n      borderColor: colors.border\n    },\n    dialogTitle: _objectSpread(_objectSpread({}, fonts.semiBold), {}, {\n      color: colors.text\n    }),\n    dialogButton: {\n      borderRadius: borderRadius.medium,\n      paddingHorizontal: spacing.m\n    }\n  });\n  var conversationId = route.params.conversationId;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    conversation = _useState2[0],\n    setConversation = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    messages = _useState4[0],\n    setMessages = _useState4[1];\n  var _useState5 = useState(true),\n    _useState6 = _slicedToArray(_useState5, 2),\n    loading = _useState6[0],\n    setLoading = _useState6[1];\n  var _useState7 = useState(''),\n    _useState8 = _slicedToArray(_useState7, 2),\n    message = _useState8[0],\n    setMessage = _useState8[1];\n  var _useState9 = useState('Professional'),\n    _useState0 = _slicedToArray(_useState9, 2),\n    selectedTone = _useState0[0],\n    setSelectedTone = _useState0[1];\n  var _useState1 = useState(false),\n    _useState10 = _slicedToArray(_useState1, 2),\n    isGenerating = _useState10[0],\n    setIsGenerating = _useState10[1];\n  var _useState11 = useState(false),\n    _useState12 = _slicedToArray(_useState11, 2),\n    showToneSelector = _useState12[0],\n    setShowToneSelector = _useState12[1];\n  var _useState13 = useState(false),\n    _useState14 = _slicedToArray(_useState13, 2),\n    menuVisible = _useState14[0],\n    setMenuVisible = _useState14[1];\n  var _useState15 = useState(false),\n    _useState16 = _slicedToArray(_useState15, 2),\n    renameDialogVisible = _useState16[0],\n    setRenameDialogVisible = _useState16[1];\n  var _useState17 = useState(''),\n    _useState18 = _slicedToArray(_useState17, 2),\n    newTitle = _useState18[0],\n    setNewTitle = _useState18[1];\n  var _useState19 = useState(false),\n    _useState20 = _slicedToArray(_useState19, 2),\n    deleteConfirmVisible = _useState20[0],\n    setDeleteConfirmVisible = _useState20[1];\n  var flatListRef = useRef(null);\n  useEffect(function () {\n    fetchConversation();\n    fetchAvailableTones();\n    var buttonRef = React.createRef();\n    navigation.setOptions({\n      title: (conversation == null ? void 0 : conversation.title) || route.params.title,\n      headerRight: function headerRight() {\n        return _jsxDEV(IconButton, {\n          icon: \"dots-vertical\",\n          size: 24,\n          onPress: function onPress() {\n            return setMenuVisible(true);\n          },\n          color: colors.text,\n          ref: buttonRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 9\n        }, _this);\n      }\n    });\n    return function () {\n      if (menuVisible) {\n        setMenuVisible(false);\n      }\n    };\n  }, [conversation]);\n  useEffect(function () {\n    var showMenu = function showMenu() {\n      if (menuVisible) {\n        var _navigation$getParent, _navigation$getParent2, _navigation$getParent3, _navigation$getParent4, _navigation$getParent5, _navigation$getParent6, _navigation$getParent7, _navigation$getParent8, _navigation$getParent9, _navigation$getParent0, _navigation$getParent1, _navigation$getParent10, _navigation$getParent11, _navigation$getParent12;\n        return _jsxDEV(Portal, {\n          children: _jsxDEV(Menu, {\n            visible: menuVisible,\n            onDismiss: function onDismiss() {\n              return setMenuVisible(false);\n            },\n            contentStyle: {\n              backgroundColor: colors.card,\n              elevation: 8\n            },\n            anchor: (_navigation$getParent = navigation.getParent()) == null ? void 0 : (_navigation$getParent2 = _navigation$getParent.getState()) == null ? void 0 : (_navigation$getParent3 = _navigation$getParent2.routes) == null ? void 0 : (_navigation$getParent4 = _navigation$getParent3[0]) == null ? void 0 : (_navigation$getParent5 = _navigation$getParent4.state) == null ? void 0 : (_navigation$getParent6 = _navigation$getParent5.routes) == null ? void 0 : (_navigation$getParent7 = _navigation$getParent6[0]) == null ? void 0 : (_navigation$getParent8 = _navigation$getParent7.state) == null ? void 0 : (_navigation$getParent9 = _navigation$getParent8.routes) == null ? void 0 : (_navigation$getParent0 = _navigation$getParent9[1]) == null ? void 0 : (_navigation$getParent1 = _navigation$getParent0.navigation) == null ? void 0 : (_navigation$getParent10 = _navigation$getParent1.options) == null ? void 0 : (_navigation$getParent11 = _navigation$getParent10.headerRight) == null ? void 0 : (_navigation$getParent12 = _navigation$getParent11.props) == null ? void 0 : _navigation$getParent12.children,\n            statusBarHeight: 0,\n            children: [_jsxDEV(Menu.Item, {\n              onPress: function onPress() {\n                setMenuVisible(false);\n                setNewTitle((conversation == null ? void 0 : conversation.title) || '');\n                setRenameDialogVisible(true);\n              },\n              title: \"Rename Conversation\",\n              leadingIcon: \"pencil\",\n              dense: true,\n              style: {\n                minHeight: 40\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 15\n            }, _this), _jsxDEV(Divider, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 15\n            }, _this), _jsxDEV(Menu.Item, {\n              onPress: function onPress() {\n                setMenuVisible(false);\n                setDeleteConfirmVisible(true);\n              },\n              title: \"Delete Conversation\",\n              leadingIcon: \"delete\",\n              dense: true,\n              style: {\n                minHeight: 40\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }, _this);\n      }\n      return null;\n    };\n    if (menuVisible) {\n      var menuPortal = showMenu();\n      if (menuPortal) {\n        setMenuVisible(true);\n      }\n    }\n  }, [menuVisible, colors, conversation]);\n  var fetchConversation = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      setLoading(true);\n      try {\n        var response = yield conversationApi.getById(conversationId);\n        setConversation(response.data.conversation);\n      } catch (error) {\n        console.error('Error fetching conversation:', error);\n      } finally {\n        setLoading(false);\n      }\n    });\n    return function fetchConversation() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var fetchAvailableTones = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      try {\n        var response = yield fetch('/api/tones');\n        var data = yield response.json();\n        setAvailableTones(data.tones || []);\n      } catch (error) {\n        console.error('Error fetching tones:', error);\n        setAvailableTones([{\n          name: 'Professional'\n        }, {\n          name: 'Casual'\n        }, {\n          name: 'Friendly'\n        }, {\n          name: 'Direct'\n        }, {\n          name: 'Empathetic'\n        }]);\n      }\n    });\n    return function fetchAvailableTones() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var handleSend = function () {\n    var _ref4 = _asyncToGenerator(function* () {\n      if (!message.trim()) return;\n      var userMessage = {\n        id: Date.now().toString(),\n        content: message,\n        sender: 'user',\n        timestamp: new Date().toISOString()\n      };\n      var updatedMessages = [].concat(_toConsumableArray(conversation.messages || []), [userMessage]);\n      setConversation(_objectSpread(_objectSpread({}, conversation), {}, {\n        messages: updatedMessages\n      }));\n      setMessage('');\n      setIsGenerating(true);\n      try {\n        var response = yield responseApi.generateAndSave({\n          message: message.trim(),\n          tone: selectedTone,\n          conversationId: conversationId\n        });\n        setConversation(_objectSpread(_objectSpread({}, conversation), {}, {\n          messages: [].concat(_toConsumableArray(updatedMessages), [response.data.aiMessage])\n        }));\n      } catch (error) {\n        console.error('Error generating response:', error);\n      } finally {\n        setIsGenerating(false);\n      }\n    });\n    return function handleSend() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  var handleRenameConversation = function () {\n    var _ref5 = _asyncToGenerator(function* () {\n      if (!newTitle.trim()) return;\n      try {\n        var response = yield conversationApi.update(conversationId, {\n          title: newTitle.trim()\n        });\n        setConversation(_objectSpread(_objectSpread({}, conversation), {}, {\n          title: newTitle.trim()\n        }));\n        navigation.setOptions({\n          title: newTitle.trim()\n        });\n        setRenameDialogVisible(false);\n      } catch (error) {\n        console.error('Error renaming conversation:', error);\n        alert('Failed to rename conversation. Please try again.');\n      }\n    });\n    return function handleRenameConversation() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n  var handleDeleteConversation = function () {\n    var _ref6 = _asyncToGenerator(function* () {\n      try {\n        yield conversationApi.delete(conversationId);\n        navigation.goBack();\n      } catch (error) {\n        console.error('Error deleting conversation:', error);\n        alert('Failed to delete conversation. Please try again.');\n      }\n    });\n    return function handleDeleteConversation() {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n  var renderMessage = function renderMessage(_ref7) {\n    var item = _ref7.item;\n    return _jsxDEV(MessageBubble, {\n      message: item\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 39\n    }, _this);\n  };\n  if (!conversation && loading) {\n    return _jsxDEV(View, {\n      style: styles.loadingContainer,\n      children: _jsxDEV(Text, {\n        children: \"Loading conversation...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 7\n    }, _this);\n  }\n  return _jsxDEV(SafeAreaView, {\n    style: styles.container,\n    edges: ['bottom'],\n    children: [_jsxDEV(Portal, {\n      children: _jsxDEV(Dialog, {\n        visible: renameDialogVisible,\n        onDismiss: function onDismiss() {\n          return setRenameDialogVisible(false);\n        },\n        style: {\n          backgroundColor: colors.card,\n          borderRadius: borderRadius.large\n        },\n        children: [_jsxDEV(Dialog.Title, {\n          style: styles.dialogTitle,\n          children: \"Rename Conversation\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 11\n        }, _this), _jsxDEV(Dialog.Content, {\n          children: _jsxDEV(TextInput, {\n            label: \"Conversation Name\",\n            value: newTitle,\n            onChangeText: setNewTitle,\n            mode: \"outlined\",\n            style: styles.dialogInput,\n            autoFocus: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 11\n        }, _this), _jsxDEV(Dialog.Actions, {\n          children: [_jsxDEV(Button, {\n            onPress: function onPress() {\n              return setRenameDialogVisible(false);\n            },\n            style: styles.dialogButton,\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 13\n          }, _this), _jsxDEV(Button, {\n            onPress: handleRenameConversation,\n            mode: \"contained\",\n            style: styles.dialogButton,\n            buttonColor: colors.primary,\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 7\n    }, _this), _jsxDEV(Portal, {\n      children: _jsxDEV(Dialog, {\n        visible: deleteConfirmVisible,\n        onDismiss: function onDismiss() {\n          return setDeleteConfirmVisible(false);\n        },\n        style: {\n          backgroundColor: colors.card,\n          borderRadius: borderRadius.large\n        },\n        children: [_jsxDEV(Dialog.Title, {\n          style: styles.dialogTitle,\n          children: \"Delete Conversation\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 11\n        }, _this), _jsxDEV(Dialog.Content, {\n          children: _jsxDEV(Text, {\n            style: {\n              color: colors.text\n            },\n            children: \"Are you sure you want to delete this conversation? This action cannot be undone.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 402,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 11\n        }, _this), _jsxDEV(Dialog.Actions, {\n          children: [_jsxDEV(Button, {\n            onPress: function onPress() {\n              return setDeleteConfirmVisible(false);\n            },\n            style: styles.dialogButton,\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 13\n          }, _this), _jsxDEV(Button, {\n            onPress: handleDeleteConversation,\n            mode: \"contained\",\n            style: styles.dialogButton,\n            buttonColor: colors.error,\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 7\n    }, _this), _jsxDEV(KeyboardAvoidingView, {\n      behavior: Platform.OS === 'ios' ? 'padding' : 'height',\n      style: styles.keyboardAvoid,\n      keyboardVerticalOffset: 80,\n      children: [_jsxDEV(FlatList, {\n        ref: flatListRef,\n        data: (conversation == null ? void 0 : conversation.messages) || [],\n        renderItem: renderMessage,\n        keyExtractor: function keyExtractor(item) {\n          return item.id;\n        },\n        contentContainerStyle: styles.messageList,\n        onContentSizeChange: function onContentSizeChange() {\n          var _flatListRef$current;\n          return (_flatListRef$current = flatListRef.current) == null ? void 0 : _flatListRef$current.scrollToEnd();\n        },\n        onLayout: function onLayout() {\n          var _flatListRef$current2;\n          return (_flatListRef$current2 = flatListRef.current) == null ? void 0 : _flatListRef$current2.scrollToEnd();\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 9\n      }, _this), showToneSelector && _jsxDEV(ToneSelector, {\n        selectedTone: selectedTone,\n        onSelectTone: function onSelectTone(tone) {\n          setSelectedTone(tone);\n          setShowToneSelector(false);\n        },\n        onClose: function onClose() {\n          return setShowToneSelector(false);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 441,\n        columnNumber: 11\n      }, _this), _jsxDEV(View, {\n        style: styles.inputContainer,\n        children: [_jsxDEV(View, {\n          style: styles.toneContainer,\n          children: [_jsxDEV(Text, {\n            style: styles.toneLabel,\n            children: \"Tone:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 453,\n            columnNumber: 13\n          }, _this), _jsxDEV(ScrollView, {\n            horizontal: true,\n            showsHorizontalScrollIndicator: false,\n            style: styles.toneScrollView,\n            children: ['Professional', 'Casual', 'Friendly', 'Funny', 'Formal', 'Empathetic', 'Direct', 'Enthusiastic'].map(function (tone) {\n              return _jsxDEV(TouchableOpacity, {\n                style: [styles.toneChip, selectedTone === tone && styles.selectedToneChip],\n                onPress: function onPress() {\n                  return setSelectedTone(tone);\n                },\n                children: _jsxDEV(Text, {\n                  style: [styles.toneChipText, selectedTone === tone && styles.selectedToneChipText],\n                  children: tone\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 468,\n                  columnNumber: 19\n                }, _this)\n              }, tone, false, {\n                fileName: _jsxFileName,\n                lineNumber: 460,\n                columnNumber: 17\n              }, _this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 454,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 452,\n          columnNumber: 11\n        }, _this), _jsxDEV(View, {\n          style: styles.inputRow,\n          children: [_jsxDEV(TextInput, {\n            value: message,\n            onChangeText: setMessage,\n            placeholder: \"Type a message...\",\n            multiline: true,\n            style: styles.input,\n            disabled: isGenerating\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 482,\n            columnNumber: 13\n          }, _this), _jsxDEV(IconButton, {\n            icon: \"send\",\n            size: 24,\n            color: colors.primary,\n            style: styles.sendButton,\n            onPress: handleSend,\n            disabled: !message.trim() || isGenerating,\n            loading: isGenerating\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 490,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 481,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 357,\n    columnNumber: 5\n  }, _this);\n};\nexport default ConversationDetailScreen;","map":{"version":3,"names":["React","useState","useEffect","useRef","View","StyleSheet","FlatList","KeyboardAvoidingView","Platform","TouchableOpacity","ScrollView","Text","TextInput","IconButton","Menu","Divider","Dialog","Portal","Button","SafeAreaView","Icon","conversationApi","responseApi","MessageBubble","ToneSelector","useTheme","jsxDEV","_jsxDEV","ConversationDetailScreen","_ref","route","navigation","_useTheme","theme","colors","spacing","fonts","shadows","borderRadius","styles","create","container","flex","backgroundColor","background","keyboardAvoid","loadingContainer","justifyContent","alignItems","messageList","padding","m","paddingBottom","xl","inputContainer","_objectSpread","surface","borderTopWidth","borderTopColor","border","OS","medium","toneContainer","marginBottom","toneLabel","semiBold","color","textSecondary","xs","fontSize","sizes","small","toneScrollView","flexDirection","toneChip","paddingHorizontal","paddingVertical","s","round","marginRight","cardAlt","borderWidth","borderColor","elevation","selectedToneChip","primary","primaryDark","toneChipText","selectedToneChipText","inputRow","input","maxHeight","large","paddingTop","text","regular","sendButton","margin","marginLeft","width","height","dialogInput","marginTop","dialogTitle","dialogButton","conversationId","params","_useState","_useState2","_slicedToArray","conversation","setConversation","_useState3","_useState4","messages","setMessages","_useState5","_useState6","loading","setLoading","_useState7","_useState8","message","setMessage","_useState9","_useState0","selectedTone","setSelectedTone","_useState1","_useState10","isGenerating","setIsGenerating","_useState11","_useState12","showToneSelector","setShowToneSelector","_useState13","_useState14","menuVisible","setMenuVisible","_useState15","_useState16","renameDialogVisible","setRenameDialogVisible","_useState17","_useState18","newTitle","setNewTitle","_useState19","_useState20","deleteConfirmVisible","setDeleteConfirmVisible","flatListRef","fetchConversation","fetchAvailableTones","buttonRef","createRef","setOptions","title","headerRight","icon","size","onPress","ref","fileName","_jsxFileName","lineNumber","columnNumber","_this","showMenu","_navigation$getParent","_navigation$getParent2","_navigation$getParent3","_navigation$getParent4","_navigation$getParent5","_navigation$getParent6","_navigation$getParent7","_navigation$getParent8","_navigation$getParent9","_navigation$getParent0","_navigation$getParent1","_navigation$getParent10","_navigation$getParent11","_navigation$getParent12","children","visible","onDismiss","contentStyle","card","anchor","getParent","getState","routes","state","options","props","statusBarHeight","Item","leadingIcon","dense","style","minHeight","menuPortal","_ref2","_asyncToGenerator","response","getById","data","error","console","apply","arguments","_ref3","fetch","json","setAvailableTones","tones","name","handleSend","_ref4","trim","userMessage","id","Date","now","toString","content","sender","timestamp","toISOString","updatedMessages","concat","_toConsumableArray","generateAndSave","tone","aiMessage","handleRenameConversation","_ref5","update","alert","handleDeleteConversation","_ref6","delete","goBack","renderMessage","_ref7","item","edges","Title","Content","label","value","onChangeText","mode","autoFocus","Actions","buttonColor","behavior","keyboardVerticalOffset","renderItem","keyExtractor","contentContainerStyle","onContentSizeChange","_flatListRef$current","current","scrollToEnd","onLayout","_flatListRef$current2","onSelectTone","onClose","horizontal","showsHorizontalScrollIndicator","map","placeholder","multiline","disabled"],"sources":["C:/Users/vanma/StudioProjects/ToneShift/toneshift-frontend/screens/conversation/ConversationDetailScreen.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport {\r\n  View,\r\n  StyleSheet,\r\n  FlatList,\r\n  KeyboardAvoidingView,\r\n  Platform,\r\n  TouchableOpacity,\r\n  ScrollView,\r\n} from 'react-native';\r\nimport { Text, TextInput, IconButton, Menu, Divider, Dialog, Portal, Button } from 'react-native-paper';\r\nimport { SafeAreaView } from 'react-native-safe-area-context';\r\nimport Icon from 'react-native-vector-icons/MaterialCommunityIcons';\r\nimport { conversationApi, responseApi } from '../../utils/api';\r\nimport MessageBubble from '../../components/conversation/MessageBubble';\r\nimport ToneSelector from '../../components/conversation/ToneSelector';\r\nimport { useTheme } from '../../utils/ThemeContext';\r\n\r\nconst ConversationDetailScreen = ({ route, navigation }) => {\r\n  const { theme } = useTheme();\r\n  const { colors, spacing, fonts, shadows, borderRadius } = theme;\r\n  \r\n  // Define styles at the top of the component\r\n  const styles = StyleSheet.create({\r\n    container: {\r\n      flex: 1,\r\n      backgroundColor: colors.background,\r\n    },\r\n    keyboardAvoid: {\r\n      flex: 1,\r\n    },\r\n    loadingContainer: {\r\n      flex: 1,\r\n      justifyContent: 'center',\r\n      alignItems: 'center',\r\n      backgroundColor: colors.background,\r\n    },\r\n    messageList: {\r\n      padding: spacing.m,\r\n      paddingBottom: spacing.xl,\r\n    },\r\n    inputContainer: {\r\n      backgroundColor: colors.surface,\r\n      borderTopWidth: 1,\r\n      borderTopColor: colors.border,\r\n      padding: spacing.m,\r\n      paddingBottom: Platform.OS === 'ios' ? spacing.xl : spacing.m,\r\n      ...shadows.medium,\r\n    },\r\n    toneContainer: {\r\n      marginBottom: spacing.m,\r\n    },\r\n    toneLabel: {\r\n      ...fonts.semiBold,\r\n      color: colors.textSecondary,\r\n      marginBottom: spacing.xs,\r\n      fontSize: fonts.sizes.small,\r\n    },\r\n    toneScrollView: {\r\n      flexDirection: 'row',\r\n      paddingBottom: spacing.xs,\r\n    },\r\n    toneChip: {\r\n      paddingHorizontal: spacing.m,\r\n      paddingVertical: spacing.s,\r\n      borderRadius: borderRadius.round,\r\n      marginRight: spacing.s,\r\n      backgroundColor: colors.cardAlt,\r\n      borderWidth: 1,\r\n      borderColor: colors.border,\r\n      elevation: 2,\r\n      marginBottom: spacing.xs,\r\n      ...shadows.small,\r\n    },\r\n    selectedToneChip: {\r\n      backgroundColor: colors.primary,\r\n      borderColor: colors.primaryDark,\r\n      elevation: 4,\r\n    },\r\n    toneChipText: {\r\n      ...fonts.semiBold,\r\n      color: colors.textSecondary,\r\n      fontSize: fonts.sizes.small,\r\n    },\r\n    selectedToneChipText: {\r\n      color: '#fff',\r\n    },\r\n    inputRow: {\r\n      flexDirection: 'row',\r\n      alignItems: 'flex-end',\r\n    },\r\n    input: {\r\n      flex: 1,\r\n      maxHeight: 120,\r\n      backgroundColor: colors.surface,\r\n      borderWidth: 1,\r\n      borderColor: colors.border,\r\n      borderRadius: borderRadius.large,\r\n      paddingHorizontal: spacing.m,\r\n      paddingTop: spacing.s,\r\n      paddingBottom: spacing.s,\r\n      color: colors.text,\r\n      ...fonts.regular,\r\n      fontSize: fonts.sizes.medium,\r\n      ...shadows.small,\r\n    },\r\n    sendButton: {\r\n      margin: 0,\r\n      marginLeft: spacing.s,\r\n      backgroundColor: colors.primary,\r\n      borderRadius: borderRadius.round,\r\n      elevation: 4,\r\n      ...shadows.small,\r\n      width: 48,\r\n      height: 48,\r\n      justifyContent: 'center',\r\n      alignItems: 'center',\r\n    },\r\n    dialogInput: {\r\n      backgroundColor: colors.surface,\r\n      borderRadius: borderRadius.medium,\r\n      marginTop: spacing.s,\r\n      borderColor: colors.border,\r\n    },\r\n    dialogTitle: {\r\n      ...fonts.semiBold,\r\n      color: colors.text,\r\n    },\r\n    dialogButton: {\r\n      borderRadius: borderRadius.medium,\r\n      paddingHorizontal: spacing.m,\r\n    },\r\n  });\r\n  \r\n  const { conversationId } = route.params;\r\n  \r\n  // State variables\r\n  const [conversation, setConversation] = useState(null);\r\n  const [messages, setMessages] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [message, setMessage] = useState('');\r\n  const [selectedTone, setSelectedTone] = useState('Professional');\r\n  const [isGenerating, setIsGenerating] = useState(false);\r\n  const [showToneSelector, setShowToneSelector] = useState(false);\r\n  const [menuVisible, setMenuVisible] = useState(false);\r\n  const [renameDialogVisible, setRenameDialogVisible] = useState(false);\r\n  const [newTitle, setNewTitle] = useState('');\r\n  const [deleteConfirmVisible, setDeleteConfirmVisible] = useState(false);\r\n  const flatListRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    fetchConversation();\r\n    fetchAvailableTones();\r\n    \r\n    // Create a ref to store the button\r\n    const buttonRef = React.createRef();\r\n    \r\n    // Set up navigation options\r\n    navigation.setOptions({\r\n      title: conversation?.title || route.params.title,\r\n      headerRight: () => (\r\n        <IconButton\r\n          icon=\"dots-vertical\"\r\n          size={24}\r\n          onPress={() => setMenuVisible(true)}\r\n          color={colors.text}\r\n          ref={buttonRef}\r\n        />\r\n      ),\r\n    });\r\n    \r\n    // Clean up menu if component unmounts while menu is open\r\n    return () => {\r\n      if (menuVisible) {\r\n        setMenuVisible(false);\r\n      }\r\n    };\r\n  }, [conversation]);\r\n\r\n  // Add this separate useEffect for the menu to avoid recreation on every render\r\n  useEffect(() => {\r\n    const showMenu = () => {\r\n      // Force immediate showing of the menu without animation\r\n      if (menuVisible) {\r\n        return (\r\n          <Portal>\r\n            <Menu\r\n              visible={menuVisible}\r\n              onDismiss={() => setMenuVisible(false)}\r\n              contentStyle={{ \r\n                backgroundColor: colors.card,\r\n                elevation: 8, // Increase elevation for better visibility\r\n              }}\r\n              anchor={\r\n                navigation.getParent()?.getState()?.routes?.[0]?.state?.routes?.[0]?.state?.routes?.[1]?.navigation?.options?.headerRight?.props?.children\r\n              }\r\n              statusBarHeight={0}\r\n            >\r\n              <Menu.Item\r\n                onPress={() => {\r\n                  setMenuVisible(false);\r\n                  setNewTitle(conversation?.title || '');\r\n                  setRenameDialogVisible(true);\r\n                }}\r\n                title=\"Rename Conversation\"\r\n                leadingIcon=\"pencil\"\r\n                dense\r\n                style={{ minHeight: 40 }} // Reduce height for faster display\r\n              />\r\n              <Divider />\r\n              <Menu.Item\r\n                onPress={() => {\r\n                  setMenuVisible(false);\r\n                  setDeleteConfirmVisible(true);\r\n                }}\r\n                title=\"Delete Conversation\"\r\n                leadingIcon=\"delete\"\r\n                dense\r\n                style={{ minHeight: 40 }} // Reduce height for faster display\r\n              />\r\n            </Menu>\r\n          </Portal>\r\n        );\r\n      }\r\n      return null;\r\n    };\r\n\r\n    // Create a new portal for the menu\r\n    if (menuVisible) {\r\n      const menuPortal = showMenu();\r\n      if (menuPortal) {\r\n        // This will force an immediate render of the menu\r\n        // without waiting for animation frames\r\n        setMenuVisible(true);\r\n      }\r\n    }\r\n  }, [menuVisible, colors, conversation]);\r\n\r\n  const fetchConversation = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await conversationApi.getById(conversationId);\r\n      setConversation(response.data.conversation);\r\n    } catch (error) {\r\n      console.error('Error fetching conversation:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchAvailableTones = async () => {\r\n    try {\r\n      // This would fetch tones from the API\r\n      const response = await fetch('/api/tones');\r\n      const data = await response.json();\r\n      setAvailableTones(data.tones || []);\r\n    } catch (error) {\r\n      console.error('Error fetching tones:', error);\r\n      // Fallback to default tones\r\n      setAvailableTones([\r\n        { name: 'Professional' },\r\n        { name: 'Casual' },\r\n        { name: 'Friendly' },\r\n        { name: 'Direct' },\r\n        { name: 'Empathetic' },\r\n      ]);\r\n    }\r\n  };\r\n\r\n  const handleSend = async () => {\r\n    if (!message.trim()) return;\r\n\r\n    // Add user message immediately for better UX\r\n    const userMessage = {\r\n      id: Date.now().toString(),\r\n      content: message,\r\n      sender: 'user',\r\n      timestamp: new Date().toISOString(),\r\n    };\r\n\r\n    const updatedMessages = [...(conversation.messages || []), userMessage];\r\n    setConversation({\r\n      ...conversation,\r\n      messages: updatedMessages,\r\n    });\r\n    setMessage('');\r\n\r\n    // Now generate AI response\r\n    setIsGenerating(true);\r\n    try {\r\n      const response = await responseApi.generateAndSave({\r\n        message: message.trim(),\r\n        tone: selectedTone,\r\n        conversationId,\r\n      });\r\n\r\n      setConversation({\r\n        ...conversation,\r\n        messages: [...updatedMessages, response.data.aiMessage],\r\n      });\r\n    } catch (error) {\r\n      console.error('Error generating response:', error);\r\n      // Handle error\r\n    } finally {\r\n      setIsGenerating(false);\r\n    }\r\n  };\r\n\r\n  const handleRenameConversation = async () => {\r\n    if (!newTitle.trim()) return;\r\n    \r\n    try {\r\n      const response = await conversationApi.update(conversationId, {\r\n        title: newTitle.trim()\r\n      });\r\n      \r\n      // Update local state\r\n      setConversation({\r\n        ...conversation,\r\n        title: newTitle.trim()\r\n      });\r\n      \r\n      // Update navigation title\r\n      navigation.setOptions({\r\n        title: newTitle.trim()\r\n      });\r\n      \r\n      // Close dialog\r\n      setRenameDialogVisible(false);\r\n    } catch (error) {\r\n      console.error('Error renaming conversation:', error);\r\n      alert('Failed to rename conversation. Please try again.');\r\n    }\r\n  };\r\n\r\n  const handleDeleteConversation = async () => {\r\n    try {\r\n      await conversationApi.delete(conversationId);\r\n      navigation.goBack();\r\n    } catch (error) {\r\n      console.error('Error deleting conversation:', error);\r\n      alert('Failed to delete conversation. Please try again.');\r\n    }\r\n  };\r\n  \r\n  const renderMessage = ({ item }) => <MessageBubble message={item} />;\r\n\r\n  if (!conversation && loading) {\r\n    return (\r\n      <View style={styles.loadingContainer}>\r\n        <Text>Loading conversation...</Text>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <SafeAreaView style={styles.container} edges={['bottom']}>\r\n      <Portal>\r\n        <Dialog\r\n          visible={renameDialogVisible}\r\n          onDismiss={() => setRenameDialogVisible(false)}\r\n          style={{ backgroundColor: colors.card, borderRadius: borderRadius.large }}\r\n        >\r\n          <Dialog.Title style={styles.dialogTitle}>Rename Conversation</Dialog.Title>\r\n          <Dialog.Content>\r\n            <TextInput\r\n              label=\"Conversation Name\"\r\n              value={newTitle}\r\n              onChangeText={setNewTitle}\r\n              mode=\"outlined\"\r\n              style={styles.dialogInput}\r\n              autoFocus\r\n            />\r\n          </Dialog.Content>\r\n          <Dialog.Actions>\r\n            <Button \r\n              onPress={() => setRenameDialogVisible(false)}\r\n              style={styles.dialogButton}\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button \r\n              onPress={handleRenameConversation} \r\n              mode=\"contained\"\r\n              style={styles.dialogButton}\r\n              buttonColor={colors.primary}\r\n            >\r\n              Save\r\n            </Button>\r\n          </Dialog.Actions>\r\n        </Dialog>\r\n      </Portal>\r\n      \r\n      <Portal>\r\n        <Dialog\r\n          visible={deleteConfirmVisible}\r\n          onDismiss={() => setDeleteConfirmVisible(false)}\r\n          style={{ backgroundColor: colors.card, borderRadius: borderRadius.large }}\r\n        >\r\n          <Dialog.Title style={styles.dialogTitle}>Delete Conversation</Dialog.Title>\r\n          <Dialog.Content>\r\n            <Text style={{ color: colors.text }}>\r\n              Are you sure you want to delete this conversation? This action cannot be undone.\r\n            </Text>\r\n          </Dialog.Content>\r\n          <Dialog.Actions>\r\n            <Button \r\n              onPress={() => setDeleteConfirmVisible(false)}\r\n              style={styles.dialogButton}\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button \r\n              onPress={handleDeleteConversation} \r\n              mode=\"contained\"\r\n              style={styles.dialogButton}\r\n              buttonColor={colors.error}\r\n            >\r\n              Delete\r\n            </Button>\r\n          </Dialog.Actions>\r\n        </Dialog>\r\n      </Portal>\r\n      \r\n      <KeyboardAvoidingView\r\n        behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\r\n        style={styles.keyboardAvoid}\r\n        keyboardVerticalOffset={80}\r\n      >\r\n        <FlatList\r\n          ref={flatListRef}\r\n          data={conversation?.messages || []}\r\n          renderItem={renderMessage}\r\n          keyExtractor={(item) => item.id}\r\n          contentContainerStyle={styles.messageList}\r\n          onContentSizeChange={() => flatListRef.current?.scrollToEnd()}\r\n          onLayout={() => flatListRef.current?.scrollToEnd()}\r\n        />\r\n\r\n        {showToneSelector && (\r\n          <ToneSelector\r\n            selectedTone={selectedTone}\r\n            onSelectTone={(tone) => {\r\n              setSelectedTone(tone);\r\n              setShowToneSelector(false);\r\n            }}\r\n            onClose={() => setShowToneSelector(false)}\r\n          />\r\n        )}\r\n\r\n        <View style={styles.inputContainer}>\r\n          <View style={styles.toneContainer}>\r\n            <Text style={styles.toneLabel}>Tone:</Text>\r\n            <ScrollView \r\n              horizontal \r\n              showsHorizontalScrollIndicator={false}\r\n              style={styles.toneScrollView}\r\n            >\r\n              {['Professional', 'Casual', 'Friendly', 'Funny', 'Formal', 'Empathetic', 'Direct', 'Enthusiastic'].map((tone) => (\r\n                <TouchableOpacity\r\n                  key={tone}\r\n                  style={[\r\n                    styles.toneChip,\r\n                    selectedTone === tone && styles.selectedToneChip\r\n                  ]}\r\n                  onPress={() => setSelectedTone(tone)}\r\n                >\r\n                  <Text \r\n                    style={[\r\n                      styles.toneChipText,\r\n                      selectedTone === tone && styles.selectedToneChipText\r\n                    ]}\r\n                  >\r\n                    {tone}\r\n                  </Text>\r\n                </TouchableOpacity>\r\n              ))}\r\n            </ScrollView>\r\n          </View>\r\n\r\n          <View style={styles.inputRow}>\r\n            <TextInput\r\n              value={message}\r\n              onChangeText={setMessage}\r\n              placeholder=\"Type a message...\"\r\n              multiline\r\n              style={styles.input}\r\n              disabled={isGenerating}\r\n            />\r\n            <IconButton\r\n              icon=\"send\"\r\n              size={24}\r\n              color={colors.primary}\r\n              style={styles.sendButton}\r\n              onPress={handleSend}\r\n              disabled={!message.trim() || isGenerating}\r\n              loading={isGenerating}\r\n            />\r\n          </View>\r\n        </View>\r\n      </KeyboardAvoidingView>\r\n    </SafeAreaView>\r\n  );\r\n};\r\n\r\nexport default ConversationDetailScreen;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}