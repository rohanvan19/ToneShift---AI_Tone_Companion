{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _typeof3 = require(\"@babel/runtime/helpers/typeof\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = useNavigationBuilder;\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\nvar _routers = require(\"@react-navigation/routers\");\nvar React = _interopRequireWildcard(require(\"react\"));\nvar _reactIs = require(\"react-is\");\nvar _Group = _interopRequireDefault(require(\"./Group\"));\nvar _isArrayEqual = _interopRequireDefault(require(\"./isArrayEqual\"));\nvar _isRecordEqual = _interopRequireDefault(require(\"./isRecordEqual\"));\nvar _NavigationHelpersContext = _interopRequireDefault(require(\"./NavigationHelpersContext\"));\nvar _NavigationRouteContext = _interopRequireDefault(require(\"./NavigationRouteContext\"));\nvar _NavigationStateContext = _interopRequireDefault(require(\"./NavigationStateContext\"));\nvar _PreventRemoveProvider = _interopRequireDefault(require(\"./PreventRemoveProvider\"));\nvar _Screen = _interopRequireDefault(require(\"./Screen\"));\nvar _types = require(\"./types\");\nvar _useChildListeners2 = _interopRequireDefault(require(\"./useChildListeners\"));\nvar _useComponent = _interopRequireDefault(require(\"./useComponent\"));\nvar _useCurrentRender = _interopRequireDefault(require(\"./useCurrentRender\"));\nvar _useDescriptors = _interopRequireDefault(require(\"./useDescriptors\"));\nvar _useEventEmitter = _interopRequireDefault(require(\"./useEventEmitter\"));\nvar _useFocusedListenersChildrenAdapter = _interopRequireDefault(require(\"./useFocusedListenersChildrenAdapter\"));\nvar _useFocusEvents = _interopRequireDefault(require(\"./useFocusEvents\"));\nvar _useKeyedChildListeners = _interopRequireDefault(require(\"./useKeyedChildListeners\"));\nvar _useNavigationHelpers = _interopRequireDefault(require(\"./useNavigationHelpers\"));\nvar _useOnAction = _interopRequireDefault(require(\"./useOnAction\"));\nvar _useOnGetState = _interopRequireDefault(require(\"./useOnGetState\"));\nvar _useOnRouteFocus = _interopRequireDefault(require(\"./useOnRouteFocus\"));\nvar _useRegisterNavigator = _interopRequireDefault(require(\"./useRegisterNavigator\"));\nvar _useScheduleUpdate = _interopRequireDefault(require(\"./useScheduleUpdate\"));\nvar _excluded = [\"children\", \"screenListeners\"];\nfunction _interopRequireWildcard(e, t) {\n  if (\"function\" == typeof WeakMap) var r = new WeakMap(),\n    n = new WeakMap();\n  return (_interopRequireWildcard = function _interopRequireWildcard(e, t) {\n    if (!t && e && e.__esModule) return e;\n    var o,\n      i,\n      f = {\n        __proto__: null,\n        \"default\": e\n      };\n    if (null === e || \"object\" != _typeof3(e) && \"function\" != typeof e) return f;\n    if (o = t ? n : r) {\n      if (o.has(e)) return o.get(e);\n      o.set(e, f);\n    }\n    for (var _t2 in e) \"default\" !== _t2 && {}.hasOwnProperty.call(e, _t2) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t2)) && (i.get || i.set) ? o(f, _t2, i) : f[_t2] = e[_t2]);\n    return f;\n  })(e, t);\n}\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      (0, _defineProperty2[\"default\"])(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\n_types.PrivateValueStore;\nvar isValidKey = function isValidKey(key) {\n  return key === undefined || typeof key === 'string' && key !== '';\n};\nvar _getRouteConfigsFromChildren = function getRouteConfigsFromChildren(children, groupKey, groupOptions) {\n  var configs = React.Children.toArray(children).reduce(function (acc, child) {\n    var _child$type, _child$props;\n    if (React.isValidElement(child)) {\n      if (child.type === _Screen[\"default\"]) {\n        if (!isValidKey(child.props.navigationKey)) {\n          throw new Error(\"Got an invalid 'navigationKey' prop (\".concat(JSON.stringify(child.props.navigationKey), \") for the screen '\").concat(child.props.name, \"'. It must be a non-empty string or 'undefined'.\"));\n        }\n        acc.push({\n          keys: [groupKey, child.props.navigationKey],\n          options: groupOptions,\n          props: child.props\n        });\n        return acc;\n      }\n      if (child.type === React.Fragment || child.type === _Group[\"default\"]) {\n        if (!isValidKey(child.props.navigationKey)) {\n          throw new Error(\"Got an invalid 'navigationKey' prop (\".concat(JSON.stringify(child.props.navigationKey), \") for the group. It must be a non-empty string or 'undefined'.\"));\n        }\n        acc.push.apply(acc, (0, _toConsumableArray2[\"default\"])(_getRouteConfigsFromChildren(child.props.children, child.props.navigationKey, child.type !== _Group[\"default\"] ? groupOptions : groupOptions != null ? [].concat((0, _toConsumableArray2[\"default\"])(groupOptions), [child.props.screenOptions]) : [child.props.screenOptions])));\n        return acc;\n      }\n    }\n    throw new Error(\"A navigator can only contain 'Screen', 'Group' or 'React.Fragment' as its direct children (found \".concat(React.isValidElement(child) ? \"'\".concat(typeof child.type === 'string' ? child.type : (_child$type = child.type) === null || _child$type === void 0 ? void 0 : _child$type.name, \"'\").concat(child.props != null && (0, _typeof2[\"default\"])(child.props) === 'object' && 'name' in child.props && (_child$props = child.props) !== null && _child$props !== void 0 && _child$props.name ? \" for the screen '\".concat(child.props.name, \"'\") : '') : (0, _typeof2[\"default\"])(child) === 'object' ? JSON.stringify(child) : \"'\".concat(String(child), \"'\"), \"). To render this component in the navigator, pass it in the 'component' prop to 'Screen'.\"));\n  }, []);\n  if (process.env.NODE_ENV !== 'production') {\n    configs.forEach(function (config) {\n      var _config$props = config.props,\n        name = _config$props.name,\n        children = _config$props.children,\n        component = _config$props.component,\n        getComponent = _config$props.getComponent;\n      if (typeof name !== 'string' || !name) {\n        throw new Error(\"Got an invalid name (\".concat(JSON.stringify(name), \") for the screen. It must be a non-empty string.\"));\n      }\n      if (children != null || component !== undefined || getComponent !== undefined) {\n        if (children != null && component !== undefined) {\n          throw new Error(\"Got both 'component' and 'children' props for the screen '\".concat(name, \"'. You must pass only one of them.\"));\n        }\n        if (children != null && getComponent !== undefined) {\n          throw new Error(\"Got both 'getComponent' and 'children' props for the screen '\".concat(name, \"'. You must pass only one of them.\"));\n        }\n        if (component !== undefined && getComponent !== undefined) {\n          throw new Error(\"Got both 'component' and 'getComponent' props for the screen '\".concat(name, \"'. You must pass only one of them.\"));\n        }\n        if (children != null && typeof children !== 'function') {\n          throw new Error(\"Got an invalid value for 'children' prop for the screen '\".concat(name, \"'. It must be a function returning a React Element.\"));\n        }\n        if (component !== undefined && !(0, _reactIs.isValidElementType)(component)) {\n          throw new Error(\"Got an invalid value for 'component' prop for the screen '\".concat(name, \"'. It must be a valid React Component.\"));\n        }\n        if (getComponent !== undefined && typeof getComponent !== 'function') {\n          throw new Error(\"Got an invalid value for 'getComponent' prop for the screen '\".concat(name, \"'. It must be a function returning a React Component.\"));\n        }\n        if (typeof component === 'function') {\n          if (component.name === 'component') {\n            console.warn(\"Looks like you're passing an inline function for 'component' prop for the screen '\".concat(name, \"' (e.g. component={() => <SomeComponent />}). Passing an inline function will cause the component state to be lost on re-render and cause perf issues since it's re-created every render. You can pass the function as children to 'Screen' instead to achieve the desired behaviour.\"));\n          } else if (/^[a-z]/.test(component.name)) {\n            console.warn(\"Got a component with the name '\".concat(component.name, \"' for the screen '\").concat(name, \"'. React Components must start with an uppercase letter. If you're passing a regular function and not a component, pass it as children to 'Screen' instead. Otherwise capitalize your component's name.\"));\n          }\n        }\n      } else {\n        throw new Error(\"Couldn't find a 'component', 'getComponent' or 'children' prop for the screen '\".concat(name, \"'. This can happen if you passed 'undefined'. You likely forgot to export your component from the file it's defined in, or mixed up default import and named import when importing.\"));\n      }\n    });\n  }\n  return configs;\n};\nfunction useNavigationBuilder(createRouter, options) {\n  var navigatorKey = (0, _useRegisterNavigator[\"default\"])();\n  var route = React.useContext(_NavigationRouteContext[\"default\"]);\n  var children = options.children,\n    screenListeners = options.screenListeners,\n    rest = (0, _objectWithoutProperties2[\"default\"])(options, _excluded);\n  var _React$useRef = React.useRef(createRouter(_objectSpread(_objectSpread({}, rest), route !== null && route !== void 0 && route.params && route.params.state == null && route.params.initial !== false && typeof route.params.screen === 'string' ? {\n      initialRouteName: route.params.screen\n    } : null))),\n    router = _React$useRef.current;\n  var routeConfigs = _getRouteConfigsFromChildren(children);\n  var screens = routeConfigs.reduce(function (acc, config) {\n    if (config.props.name in acc) {\n      throw new Error(\"A navigator cannot contain multiple 'Screen' components with the same name (found duplicate screen named '\".concat(config.props.name, \"')\"));\n    }\n    acc[config.props.name] = config;\n    return acc;\n  }, {});\n  var routeNames = routeConfigs.map(function (config) {\n    return config.props.name;\n  });\n  var routeKeyList = routeNames.reduce(function (acc, curr) {\n    acc[curr] = screens[curr].keys.map(function (key) {\n      return key !== null && key !== void 0 ? key : '';\n    }).join(':');\n    return acc;\n  }, {});\n  var routeParamList = routeNames.reduce(function (acc, curr) {\n    var initialParams = screens[curr].props.initialParams;\n    acc[curr] = initialParams;\n    return acc;\n  }, {});\n  var routeGetIdList = routeNames.reduce(function (acc, curr) {\n    return Object.assign(acc, (0, _defineProperty2[\"default\"])({}, curr, screens[curr].props.getId));\n  }, {});\n  if (!routeNames.length) {\n    throw new Error(\"Couldn't find any screens for the navigator. Have you defined any screens as its children?\");\n  }\n  var isStateValid = React.useCallback(function (state) {\n    return state.type === undefined || state.type === router.type;\n  }, [router.type]);\n  var isStateInitialized = React.useCallback(function (state) {\n    return state !== undefined && state.stale === false && isStateValid(state);\n  }, [isStateValid]);\n  var _React$useContext = React.useContext(_NavigationStateContext[\"default\"]),\n    currentState = _React$useContext.state,\n    getCurrentState = _React$useContext.getState,\n    setCurrentState = _React$useContext.setState,\n    setKey = _React$useContext.setKey,\n    getKey = _React$useContext.getKey,\n    getIsInitial = _React$useContext.getIsInitial;\n  var stateCleanedUp = React.useRef(false);\n  var cleanUpState = React.useCallback(function () {\n    setCurrentState(undefined);\n    stateCleanedUp.current = true;\n  }, [setCurrentState]);\n  var setState = React.useCallback(function (state) {\n    if (stateCleanedUp.current) {\n      return;\n    }\n    setCurrentState(state);\n  }, [setCurrentState]);\n  var _React$useMemo = React.useMemo(function () {\n      var _route$params4;\n      var initialRouteParamList = routeNames.reduce(function (acc, curr) {\n        var _route$params, _route$params2, _route$params3;\n        var initialParams = screens[curr].props.initialParams;\n        var initialParamsFromParams = (route === null || route === void 0 ? void 0 : (_route$params = route.params) === null || _route$params === void 0 ? void 0 : _route$params.state) == null && (route === null || route === void 0 ? void 0 : (_route$params2 = route.params) === null || _route$params2 === void 0 ? void 0 : _route$params2.initial) !== false && (route === null || route === void 0 ? void 0 : (_route$params3 = route.params) === null || _route$params3 === void 0 ? void 0 : _route$params3.screen) === curr ? route.params.params : undefined;\n        acc[curr] = initialParams !== undefined || initialParamsFromParams !== undefined ? _objectSpread(_objectSpread({}, initialParams), initialParamsFromParams) : undefined;\n        return acc;\n      }, {});\n      if ((currentState === undefined || !isStateValid(currentState)) && (route === null || route === void 0 ? void 0 : (_route$params4 = route.params) === null || _route$params4 === void 0 ? void 0 : _route$params4.state) == null) {\n        return [router.getInitialState({\n          routeNames: routeNames,\n          routeParamList: initialRouteParamList,\n          routeGetIdList: routeGetIdList\n        }), true];\n      } else {\n        var _ref;\n        var _route$params5;\n        return [router.getRehydratedState((_ref = route === null || route === void 0 ? void 0 : (_route$params5 = route.params) === null || _route$params5 === void 0 ? void 0 : _route$params5.state) !== null && _ref !== void 0 ? _ref : currentState, {\n          routeNames: routeNames,\n          routeParamList: initialRouteParamList,\n          routeGetIdList: routeGetIdList\n        }), false];\n      }\n    }, [currentState, router, isStateValid]),\n    _React$useMemo2 = (0, _slicedToArray2[\"default\"])(_React$useMemo, 2),\n    initializedState = _React$useMemo2[0],\n    isFirstStateInitialization = _React$useMemo2[1];\n  var previousRouteKeyListRef = React.useRef(routeKeyList);\n  React.useEffect(function () {\n    previousRouteKeyListRef.current = routeKeyList;\n  });\n  var previousRouteKeyList = previousRouteKeyListRef.current;\n  var state = isStateInitialized(currentState) ? currentState : initializedState;\n  var nextState = state;\n  if (!(0, _isArrayEqual[\"default\"])(state.routeNames, routeNames) || !(0, _isRecordEqual[\"default\"])(routeKeyList, previousRouteKeyList)) {\n    nextState = router.getStateForRouteNamesChange(state, {\n      routeNames: routeNames,\n      routeParamList: routeParamList,\n      routeGetIdList: routeGetIdList,\n      routeKeyChanges: Object.keys(routeKeyList).filter(function (name) {\n        return previousRouteKeyList.hasOwnProperty(name) && routeKeyList[name] !== previousRouteKeyList[name];\n      })\n    });\n  }\n  var previousNestedParamsRef = React.useRef(route === null || route === void 0 ? void 0 : route.params);\n  React.useEffect(function () {\n    previousNestedParamsRef.current = route === null || route === void 0 ? void 0 : route.params;\n  }, [route === null || route === void 0 ? void 0 : route.params]);\n  if (route !== null && route !== void 0 && route.params) {\n    var previousParams = previousNestedParamsRef.current;\n    var action;\n    if ((0, _typeof2[\"default\"])(route.params.state) === 'object' && route.params.state != null && route.params !== previousParams) {\n      action = _routers.CommonActions.reset(route.params.state);\n    } else if (typeof route.params.screen === 'string' && (route.params.initial === false && isFirstStateInitialization || route.params !== previousParams)) {\n      action = _routers.CommonActions.navigate({\n        name: route.params.screen,\n        params: route.params.params,\n        path: route.params.path\n      });\n    }\n    var updatedState = action ? router.getStateForAction(nextState, action, {\n      routeNames: routeNames,\n      routeParamList: routeParamList,\n      routeGetIdList: routeGetIdList\n    }) : null;\n    nextState = updatedState !== null ? router.getRehydratedState(updatedState, {\n      routeNames: routeNames,\n      routeParamList: routeParamList,\n      routeGetIdList: routeGetIdList\n    }) : nextState;\n  }\n  var shouldUpdate = state !== nextState;\n  (0, _useScheduleUpdate[\"default\"])(function () {\n    if (shouldUpdate) {\n      setState(nextState);\n    }\n  });\n  state = nextState;\n  React.useEffect(function () {\n    setKey(navigatorKey);\n    if (!getIsInitial()) {\n      setState(nextState);\n    }\n    return function () {\n      setTimeout(function () {\n        if (getCurrentState() !== undefined && getKey() === navigatorKey) {\n          cleanUpState();\n        }\n      }, 0);\n    };\n  }, []);\n  var initializedStateRef = React.useRef();\n  initializedStateRef.current = initializedState;\n  var getState = React.useCallback(function () {\n    var currentState = getCurrentState();\n    return isStateInitialized(currentState) ? currentState : initializedStateRef.current;\n  }, [getCurrentState, isStateInitialized]);\n  var emitter = (0, _useEventEmitter[\"default\"])(function (e) {\n    var _ref2;\n    var routeNames = [];\n    var route;\n    if (e.target) {\n      var _route;\n      route = state.routes.find(function (route) {\n        return route.key === e.target;\n      });\n      if ((_route = route) !== null && _route !== void 0 && _route.name) {\n        routeNames.push(route.name);\n      }\n    } else {\n      route = state.routes[state.index];\n      routeNames.push.apply(routeNames, (0, _toConsumableArray2[\"default\"])(Object.keys(screens).filter(function (name) {\n        var _route2;\n        return ((_route2 = route) === null || _route2 === void 0 ? void 0 : _route2.name) === name;\n      })));\n    }\n    if (route == null) {\n      return;\n    }\n    var navigation = descriptors[route.key].navigation;\n    var listeners = (_ref2 = []).concat.apply(_ref2, (0, _toConsumableArray2[\"default\"])([screenListeners].concat((0, _toConsumableArray2[\"default\"])(routeNames.map(function (name) {\n      var listeners = screens[name].props.listeners;\n      return listeners;\n    }))).map(function (listeners) {\n      var map = typeof listeners === 'function' ? listeners({\n        route: route,\n        navigation: navigation\n      }) : listeners;\n      return map ? Object.keys(map).filter(function (type) {\n        return type === e.type;\n      }).map(function (type) {\n        return map === null || map === void 0 ? void 0 : map[type];\n      }) : undefined;\n    }))).filter(function (cb, i, self) {\n      return cb && self.lastIndexOf(cb) === i;\n    });\n    listeners.forEach(function (listener) {\n      return listener === null || listener === void 0 ? void 0 : listener(e);\n    });\n  });\n  (0, _useFocusEvents[\"default\"])({\n    state: state,\n    emitter: emitter\n  });\n  React.useEffect(function () {\n    emitter.emit({\n      type: 'state',\n      data: {\n        state: state\n      }\n    });\n  }, [emitter, state]);\n  var _useChildListeners = (0, _useChildListeners2[\"default\"])(),\n    childListeners = _useChildListeners.listeners,\n    addListener = _useChildListeners.addListener;\n  var _useKeyedChildListene = (0, _useKeyedChildListeners[\"default\"])(),\n    keyedListeners = _useKeyedChildListene.keyedListeners,\n    addKeyedListener = _useKeyedChildListene.addKeyedListener;\n  var onAction = (0, _useOnAction[\"default\"])({\n    router: router,\n    getState: getState,\n    setState: setState,\n    key: route === null || route === void 0 ? void 0 : route.key,\n    actionListeners: childListeners.action,\n    beforeRemoveListeners: keyedListeners.beforeRemove,\n    routerConfigOptions: {\n      routeNames: routeNames,\n      routeParamList: routeParamList,\n      routeGetIdList: routeGetIdList\n    },\n    emitter: emitter\n  });\n  var onRouteFocus = (0, _useOnRouteFocus[\"default\"])({\n    router: router,\n    key: route === null || route === void 0 ? void 0 : route.key,\n    getState: getState,\n    setState: setState\n  });\n  var navigation = (0, _useNavigationHelpers[\"default\"])({\n    id: options.id,\n    onAction: onAction,\n    getState: getState,\n    emitter: emitter,\n    router: router\n  });\n  (0, _useFocusedListenersChildrenAdapter[\"default\"])({\n    navigation: navigation,\n    focusedListeners: childListeners.focus\n  });\n  (0, _useOnGetState[\"default\"])({\n    getState: getState,\n    getStateListeners: keyedListeners.getState\n  });\n  var descriptors = (0, _useDescriptors[\"default\"])({\n    state: state,\n    screens: screens,\n    navigation: navigation,\n    screenOptions: options.screenOptions,\n    defaultScreenOptions: options.defaultScreenOptions,\n    onAction: onAction,\n    getState: getState,\n    setState: setState,\n    onRouteFocus: onRouteFocus,\n    addListener: addListener,\n    addKeyedListener: addKeyedListener,\n    router: router,\n    emitter: emitter\n  });\n  (0, _useCurrentRender[\"default\"])({\n    state: state,\n    navigation: navigation,\n    descriptors: descriptors\n  });\n  var NavigationContent = (0, _useComponent[\"default\"])(function (children) {\n    return React.createElement(_NavigationHelpersContext[\"default\"].Provider, {\n      value: navigation\n    }, React.createElement(_PreventRemoveProvider[\"default\"], null, children));\n  });\n  return {\n    state: state,\n    navigation: navigation,\n    descriptors: descriptors,\n    NavigationContent: NavigationContent\n  };\n}","map":{"version":3,"names":["_routers","require","React","_interopRequireWildcard","_reactIs","_Group","_interopRequireDefault","_isArrayEqual","_isRecordEqual","_NavigationHelpersContext","_NavigationRouteContext","_NavigationStateContext","_PreventRemoveProvider","_Screen","_types","_useChildListeners2","_useComponent","_useCurrentRender","_useDescriptors","_useEventEmitter","_useFocusedListenersChildrenAdapter","_useFocusEvents","_useKeyedChildListeners","_useNavigationHelpers","_useOnAction","_useOnGetState","_useOnRouteFocus","_useRegisterNavigator","_useScheduleUpdate","_excluded","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof3","has","get","set","_t2","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","ownKeys","keys","getOwnPropertySymbols","filter","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty2","getOwnPropertyDescriptors","defineProperties","PrivateValueStore","isValidKey","key","undefined","_getRouteConfigsFromChildren","getRouteConfigsFromChildren","children","groupKey","groupOptions","configs","Children","toArray","reduce","acc","child","_child$type","_child$props","isValidElement","type","props","navigationKey","Error","concat","JSON","stringify","name","options","Fragment","_toConsumableArray2","screenOptions","_typeof2","String","process","env","NODE_ENV","config","_config$props","component","getComponent","isValidElementType","console","warn","test","useNavigationBuilder","createRouter","navigatorKey","route","useContext","screenListeners","rest","_objectWithoutProperties2","_React$useRef","useRef","params","state","initial","screen","initialRouteName","router","current","routeConfigs","screens","routeNames","map","routeKeyList","curr","join","routeParamList","initialParams","routeGetIdList","assign","getId","isStateValid","useCallback","isStateInitialized","stale","_React$useContext","currentState","getCurrentState","getState","setCurrentState","setState","setKey","getKey","getIsInitial","stateCleanedUp","cleanUpState","_React$useMemo","useMemo","_route$params4","initialRouteParamList","_route$params","_route$params2","_route$params3","initialParamsFromParams","getInitialState","_ref","_route$params5","getRehydratedState","_React$useMemo2","_slicedToArray2","initializedState","isFirstStateInitialization","previousRouteKeyListRef","useEffect","previousRouteKeyList","nextState","getStateForRouteNamesChange","routeKeyChanges","previousNestedParamsRef","previousParams","action","CommonActions","reset","navigate","path","updatedState","getStateForAction","shouldUpdate","setTimeout","initializedStateRef","emitter","_ref2","target","_route","routes","find","index","_route2","navigation","descriptors","listeners","cb","self","lastIndexOf","listener","emit","data","_useChildListeners","childListeners","addListener","_useKeyedChildListene","keyedListeners","addKeyedListener","onAction","actionListeners","beforeRemoveListeners","beforeRemove","routerConfigOptions","onRouteFocus","id","focusedListeners","focus","getStateListeners","defaultScreenOptions","NavigationContent","createElement","Provider","value"],"sources":["C:\\Users\\vanma\\StudioProjects\\ToneShift\\toneshift-frontend\\node_modules\\@react-navigation\\core\\src\\useNavigationBuilder.tsx"],"sourcesContent":["import {\n  CommonActions,\n  DefaultRouterOptions,\n  NavigationAction,\n  NavigationState,\n  ParamListBase,\n  PartialState,\n  Route,\n  Router,\n  RouterConfigOptions,\n  RouterFactory,\n} from '@react-navigation/routers';\nimport * as React from 'react';\nimport { isValidElementType } from 'react-is';\n\nimport Group from './Group';\nimport isArrayEqual from './isArrayEqual';\nimport isRecordEqual from './isRecordEqual';\nimport NavigationHelpersContext from './NavigationHelpersContext';\nimport NavigationRouteContext from './NavigationRouteContext';\nimport NavigationStateContext from './NavigationStateContext';\nimport PreventRemoveProvider from './PreventRemoveProvider';\nimport Screen from './Screen';\nimport {\n  DefaultNavigatorOptions,\n  EventMapBase,\n  EventMapCore,\n  NavigatorScreenParams,\n  PrivateValueStore,\n  RouteConfig,\n  RouteProp,\n} from './types';\nimport useChildListeners from './useChildListeners';\nimport useComponent from './useComponent';\nimport useCurrentRender from './useCurrentRender';\nimport useDescriptors, { ScreenConfigWithParent } from './useDescriptors';\nimport useEventEmitter from './useEventEmitter';\nimport useFocusedListenersChildrenAdapter from './useFocusedListenersChildrenAdapter';\nimport useFocusEvents from './useFocusEvents';\nimport useKeyedChildListeners from './useKeyedChildListeners';\nimport useNavigationHelpers from './useNavigationHelpers';\nimport useOnAction from './useOnAction';\nimport useOnGetState from './useOnGetState';\nimport useOnRouteFocus from './useOnRouteFocus';\nimport useRegisterNavigator from './useRegisterNavigator';\nimport useScheduleUpdate from './useScheduleUpdate';\n\n// This is to make TypeScript compiler happy\n// eslint-disable-next-line babel/no-unused-expressions\nPrivateValueStore;\n\ntype NavigationBuilderOptions<ScreenOptions extends {}> = {\n  /**\n   * Default options specified by the navigator.\n   * It receives the custom options in the arguments if a function is specified.\n   */\n  defaultScreenOptions?:\n    | ScreenOptions\n    | ((props: {\n        route: RouteProp<ParamListBase>;\n        navigation: any;\n        options: ScreenOptions;\n      }) => ScreenOptions);\n};\n\ntype NavigatorRoute<State extends NavigationState> = {\n  key: string;\n  params?: NavigatorScreenParams<ParamListBase, State>;\n};\n\nconst isValidKey = (key: unknown) =>\n  key === undefined || (typeof key === 'string' && key !== '');\n\n/**\n * Extract route config object from React children elements.\n *\n * @param children React Elements to extract the config from.\n */\nconst getRouteConfigsFromChildren = <\n  State extends NavigationState,\n  ScreenOptions extends {},\n  EventMap extends EventMapBase\n>(\n  children: React.ReactNode,\n  groupKey?: string,\n  groupOptions?: ScreenConfigWithParent<\n    State,\n    ScreenOptions,\n    EventMap\n  >['options']\n) => {\n  const configs = React.Children.toArray(children).reduce<\n    ScreenConfigWithParent<State, ScreenOptions, EventMap>[]\n  >((acc, child) => {\n    if (React.isValidElement(child)) {\n      if (child.type === Screen) {\n        // We can only extract the config from `Screen` elements\n        // If something else was rendered, it's probably a bug\n\n        if (!isValidKey(child.props.navigationKey)) {\n          throw new Error(\n            `Got an invalid 'navigationKey' prop (${JSON.stringify(\n              child.props.navigationKey\n            )}) for the screen '${\n              child.props.name\n            }'. It must be a non-empty string or 'undefined'.`\n          );\n        }\n\n        acc.push({\n          keys: [groupKey, child.props.navigationKey],\n          options: groupOptions,\n          props: child.props as RouteConfig<\n            ParamListBase,\n            string,\n            State,\n            ScreenOptions,\n            EventMap\n          >,\n        });\n        return acc;\n      }\n\n      if (child.type === React.Fragment || child.type === Group) {\n        if (!isValidKey(child.props.navigationKey)) {\n          throw new Error(\n            `Got an invalid 'navigationKey' prop (${JSON.stringify(\n              child.props.navigationKey\n            )}) for the group. It must be a non-empty string or 'undefined'.`\n          );\n        }\n\n        // When we encounter a fragment or group, we need to dive into its children to extract the configs\n        // This is handy to conditionally define a group of screens\n        acc.push(\n          ...getRouteConfigsFromChildren<State, ScreenOptions, EventMap>(\n            child.props.children,\n            child.props.navigationKey,\n            child.type !== Group\n              ? groupOptions\n              : groupOptions != null\n              ? [...groupOptions, child.props.screenOptions]\n              : [child.props.screenOptions]\n          )\n        );\n        return acc;\n      }\n    }\n\n    throw new Error(\n      `A navigator can only contain 'Screen', 'Group' or 'React.Fragment' as its direct children (found ${\n        React.isValidElement(child)\n          ? `'${\n              typeof child.type === 'string' ? child.type : child.type?.name\n            }'${\n              child.props != null &&\n              typeof child.props === 'object' &&\n              'name' in child.props &&\n              child.props?.name\n                ? ` for the screen '${child.props.name}'`\n                : ''\n            }`\n          : typeof child === 'object'\n          ? JSON.stringify(child)\n          : `'${String(child)}'`\n      }). To render this component in the navigator, pass it in the 'component' prop to 'Screen'.`\n    );\n  }, []);\n\n  if (process.env.NODE_ENV !== 'production') {\n    configs.forEach((config) => {\n      const { name, children, component, getComponent } = config.props;\n\n      if (typeof name !== 'string' || !name) {\n        throw new Error(\n          `Got an invalid name (${JSON.stringify(\n            name\n          )}) for the screen. It must be a non-empty string.`\n        );\n      }\n\n      if (\n        children != null ||\n        component !== undefined ||\n        getComponent !== undefined\n      ) {\n        if (children != null && component !== undefined) {\n          throw new Error(\n            `Got both 'component' and 'children' props for the screen '${name}'. You must pass only one of them.`\n          );\n        }\n\n        if (children != null && getComponent !== undefined) {\n          throw new Error(\n            `Got both 'getComponent' and 'children' props for the screen '${name}'. You must pass only one of them.`\n          );\n        }\n\n        if (component !== undefined && getComponent !== undefined) {\n          throw new Error(\n            `Got both 'component' and 'getComponent' props for the screen '${name}'. You must pass only one of them.`\n          );\n        }\n\n        if (children != null && typeof children !== 'function') {\n          throw new Error(\n            `Got an invalid value for 'children' prop for the screen '${name}'. It must be a function returning a React Element.`\n          );\n        }\n\n        if (component !== undefined && !isValidElementType(component)) {\n          throw new Error(\n            `Got an invalid value for 'component' prop for the screen '${name}'. It must be a valid React Component.`\n          );\n        }\n\n        if (getComponent !== undefined && typeof getComponent !== 'function') {\n          throw new Error(\n            `Got an invalid value for 'getComponent' prop for the screen '${name}'. It must be a function returning a React Component.`\n          );\n        }\n\n        if (typeof component === 'function') {\n          if (component.name === 'component') {\n            // Inline anonymous functions passed in the `component` prop will have the name of the prop\n            // It's relatively safe to assume that it's not a component since it should also have PascalCase name\n            // We won't catch all scenarios here, but this should catch a good chunk of incorrect use.\n            console.warn(\n              `Looks like you're passing an inline function for 'component' prop for the screen '${name}' (e.g. component={() => <SomeComponent />}). Passing an inline function will cause the component state to be lost on re-render and cause perf issues since it's re-created every render. You can pass the function as children to 'Screen' instead to achieve the desired behaviour.`\n            );\n          } else if (/^[a-z]/.test(component.name)) {\n            console.warn(\n              `Got a component with the name '${component.name}' for the screen '${name}'. React Components must start with an uppercase letter. If you're passing a regular function and not a component, pass it as children to 'Screen' instead. Otherwise capitalize your component's name.`\n            );\n          }\n        }\n      } else {\n        throw new Error(\n          `Couldn't find a 'component', 'getComponent' or 'children' prop for the screen '${name}'. This can happen if you passed 'undefined'. You likely forgot to export your component from the file it's defined in, or mixed up default import and named import when importing.`\n        );\n      }\n    });\n  }\n\n  return configs;\n};\n\n/**\n * Hook for building navigators.\n *\n * @param createRouter Factory method which returns router object.\n * @param options Options object containing `children` and additional options for the router.\n * @returns An object containing `state`, `navigation`, `descriptors` objects.\n */\nexport default function useNavigationBuilder<\n  State extends NavigationState,\n  RouterOptions extends DefaultRouterOptions,\n  ActionHelpers extends Record<string, () => void>,\n  ScreenOptions extends {},\n  EventMap extends Record<string, any>\n>(\n  createRouter: RouterFactory<State, any, RouterOptions>,\n  options: DefaultNavigatorOptions<\n    ParamListBase,\n    State,\n    ScreenOptions,\n    EventMap\n  > &\n    NavigationBuilderOptions<ScreenOptions> &\n    RouterOptions\n) {\n  const navigatorKey = useRegisterNavigator();\n\n  const route = React.useContext(NavigationRouteContext) as\n    | NavigatorRoute<State>\n    | undefined;\n\n  const { children, screenListeners, ...rest } = options;\n  const { current: router } = React.useRef<Router<State, any>>(\n    createRouter({\n      ...(rest as unknown as RouterOptions),\n      ...(route?.params &&\n      route.params.state == null &&\n      route.params.initial !== false &&\n      typeof route.params.screen === 'string'\n        ? { initialRouteName: route.params.screen }\n        : null),\n    })\n  );\n\n  const routeConfigs = getRouteConfigsFromChildren<\n    State,\n    ScreenOptions,\n    EventMap\n  >(children);\n\n  const screens = routeConfigs.reduce<\n    Record<string, ScreenConfigWithParent<State, ScreenOptions, EventMap>>\n  >((acc, config) => {\n    if (config.props.name in acc) {\n      throw new Error(\n        `A navigator cannot contain multiple 'Screen' components with the same name (found duplicate screen named '${config.props.name}')`\n      );\n    }\n\n    acc[config.props.name] = config;\n    return acc;\n  }, {});\n\n  const routeNames = routeConfigs.map((config) => config.props.name);\n  const routeKeyList = routeNames.reduce<Record<string, React.Key | undefined>>(\n    (acc, curr) => {\n      acc[curr] = screens[curr].keys.map((key) => key ?? '').join(':');\n      return acc;\n    },\n    {}\n  );\n  const routeParamList = routeNames.reduce<Record<string, object | undefined>>(\n    (acc, curr) => {\n      const { initialParams } = screens[curr].props;\n      acc[curr] = initialParams;\n      return acc;\n    },\n    {}\n  );\n  const routeGetIdList = routeNames.reduce<\n    RouterConfigOptions['routeGetIdList']\n  >(\n    (acc, curr) =>\n      Object.assign(acc, {\n        [curr]: screens[curr].props.getId,\n      }),\n    {}\n  );\n\n  if (!routeNames.length) {\n    throw new Error(\n      \"Couldn't find any screens for the navigator. Have you defined any screens as its children?\"\n    );\n  }\n\n  const isStateValid = React.useCallback(\n    (state: NavigationState | PartialState<NavigationState>) =>\n      state.type === undefined || state.type === router.type,\n    [router.type]\n  );\n\n  const isStateInitialized = React.useCallback(\n    (state: NavigationState | PartialState<NavigationState> | undefined) =>\n      state !== undefined && state.stale === false && isStateValid(state),\n    [isStateValid]\n  );\n\n  const {\n    state: currentState,\n    getState: getCurrentState,\n    setState: setCurrentState,\n    setKey,\n    getKey,\n    getIsInitial,\n  } = React.useContext(NavigationStateContext);\n\n  const stateCleanedUp = React.useRef(false);\n\n  const cleanUpState = React.useCallback(() => {\n    setCurrentState(undefined);\n    stateCleanedUp.current = true;\n  }, [setCurrentState]);\n\n  const setState = React.useCallback(\n    (state: NavigationState | PartialState<NavigationState> | undefined) => {\n      if (stateCleanedUp.current) {\n        // State might have been already cleaned up due to unmount\n        // We do not want to expose API allowing to override this\n        // This would lead to old data preservation on main navigator unmount\n        return;\n      }\n      setCurrentState(state);\n    },\n    [setCurrentState]\n  );\n\n  const [initializedState, isFirstStateInitialization] = React.useMemo(() => {\n    const initialRouteParamList = routeNames.reduce<\n      Record<string, object | undefined>\n    >((acc, curr) => {\n      const { initialParams } = screens[curr].props;\n      const initialParamsFromParams =\n        route?.params?.state == null &&\n        route?.params?.initial !== false &&\n        route?.params?.screen === curr\n          ? route.params.params\n          : undefined;\n\n      acc[curr] =\n        initialParams !== undefined || initialParamsFromParams !== undefined\n          ? {\n              ...initialParams,\n              ...initialParamsFromParams,\n            }\n          : undefined;\n\n      return acc;\n    }, {});\n\n    // If the current state isn't initialized on first render, we initialize it\n    // We also need to re-initialize it if the state passed from parent was changed (maybe due to reset)\n    // Otherwise assume that the state was provided as initial state\n    // So we need to rehydrate it to make it usable\n    if (\n      (currentState === undefined || !isStateValid(currentState)) &&\n      route?.params?.state == null\n    ) {\n      return [\n        router.getInitialState({\n          routeNames,\n          routeParamList: initialRouteParamList,\n          routeGetIdList,\n        }),\n        true,\n      ];\n    } else {\n      return [\n        router.getRehydratedState(\n          route?.params?.state ?? (currentState as PartialState<State>),\n          {\n            routeNames,\n            routeParamList: initialRouteParamList,\n            routeGetIdList,\n          }\n        ),\n        false,\n      ];\n    }\n    // We explicitly don't include routeNames, route.params etc. in the dep list\n    // below. We want to avoid forcing a new state to be calculated in those cases\n    // Instead, we handle changes to these in the nextState code below. Note\n    // that some changes to routeConfigs are explicitly ignored, such as changes\n    // to initialParams\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentState, router, isStateValid]);\n\n  const previousRouteKeyListRef = React.useRef(routeKeyList);\n\n  React.useEffect(() => {\n    previousRouteKeyListRef.current = routeKeyList;\n  });\n\n  const previousRouteKeyList = previousRouteKeyListRef.current;\n\n  let state =\n    // If the state isn't initialized, or stale, use the state we initialized instead\n    // The state won't update until there's a change needed in the state we have initalized locally\n    // So it'll be `undefined` or stale until the first navigation event happens\n    isStateInitialized(currentState)\n      ? (currentState as State)\n      : (initializedState as State);\n\n  let nextState: State = state;\n\n  if (\n    !isArrayEqual(state.routeNames, routeNames) ||\n    !isRecordEqual(routeKeyList, previousRouteKeyList)\n  ) {\n    // When the list of route names change, the router should handle it to remove invalid routes\n    nextState = router.getStateForRouteNamesChange(state, {\n      routeNames,\n      routeParamList,\n      routeGetIdList,\n      routeKeyChanges: Object.keys(routeKeyList).filter(\n        (name) =>\n          previousRouteKeyList.hasOwnProperty(name) &&\n          routeKeyList[name] !== previousRouteKeyList[name]\n      ),\n    });\n  }\n\n  const previousNestedParamsRef = React.useRef(route?.params);\n\n  React.useEffect(() => {\n    previousNestedParamsRef.current = route?.params;\n  }, [route?.params]);\n\n  if (route?.params) {\n    const previousParams = previousNestedParamsRef.current;\n\n    let action: CommonActions.Action | undefined;\n\n    if (\n      typeof route.params.state === 'object' &&\n      route.params.state != null &&\n      route.params !== previousParams\n    ) {\n      // If the route was updated with new state, we should reset to it\n      action = CommonActions.reset(route.params.state);\n    } else if (\n      typeof route.params.screen === 'string' &&\n      ((route.params.initial === false && isFirstStateInitialization) ||\n        route.params !== previousParams)\n    ) {\n      // If the route was updated with new screen name and/or params, we should navigate there\n      action = CommonActions.navigate({\n        name: route.params.screen,\n        params: route.params.params,\n        path: route.params.path,\n      });\n    }\n\n    // The update should be limited to current navigator only, so we call the router manually\n    const updatedState = action\n      ? router.getStateForAction(nextState, action, {\n          routeNames,\n          routeParamList,\n          routeGetIdList,\n        })\n      : null;\n\n    nextState =\n      updatedState !== null\n        ? router.getRehydratedState(updatedState, {\n            routeNames,\n            routeParamList,\n            routeGetIdList,\n          })\n        : nextState;\n  }\n\n  const shouldUpdate = state !== nextState;\n\n  useScheduleUpdate(() => {\n    if (shouldUpdate) {\n      // If the state needs to be updated, we'll schedule an update\n      setState(nextState);\n    }\n  });\n\n  // The up-to-date state will come in next render, but we don't need to wait for it\n  // We can't use the outdated state since the screens have changed, which will cause error due to mismatched config\n  // So we override the state object we return to use the latest state as soon as possible\n  state = nextState;\n\n  React.useEffect(() => {\n    setKey(navigatorKey);\n\n    if (!getIsInitial()) {\n      // If it's not initial render, we need to update the state\n      // This will make sure that our container gets notifier of state changes due to new mounts\n      // This is necessary for proper screen tracking, URL updates etc.\n      setState(nextState);\n    }\n\n    return () => {\n      // We need to clean up state for this navigator on unmount\n      // We do it in a timeout because we need to detect if another navigator mounted in the meantime\n      // For example, if another navigator has started rendering, we should skip cleanup\n      // Otherwise, our cleanup step will cleanup state for the other navigator and re-initialize it\n      setTimeout(() => {\n        if (getCurrentState() !== undefined && getKey() === navigatorKey) {\n          cleanUpState();\n        }\n      }, 0);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // We initialize this ref here to avoid a new getState getting initialized\n  // whenever initializedState changes. We want getState to have access to the\n  // latest initializedState, but don't need it to change when that happens\n  const initializedStateRef = React.useRef<State>();\n  initializedStateRef.current = initializedState;\n\n  const getState = React.useCallback((): State => {\n    const currentState = getCurrentState();\n\n    return isStateInitialized(currentState)\n      ? (currentState as State)\n      : (initializedStateRef.current as State);\n  }, [getCurrentState, isStateInitialized]);\n\n  const emitter = useEventEmitter<EventMapCore<State>>((e) => {\n    let routeNames = [];\n\n    let route: Route<string> | undefined;\n\n    if (e.target) {\n      route = state.routes.find((route) => route.key === e.target);\n\n      if (route?.name) {\n        routeNames.push(route.name);\n      }\n    } else {\n      route = state.routes[state.index];\n      routeNames.push(\n        ...Object.keys(screens).filter((name) => route?.name === name)\n      );\n    }\n\n    if (route == null) {\n      return;\n    }\n\n    const navigation = descriptors[route.key].navigation;\n\n    const listeners = ([] as (((e: any) => void) | undefined)[])\n      .concat(\n        // Get an array of listeners for all screens + common listeners on navigator\n        ...[\n          screenListeners,\n          ...routeNames.map((name) => {\n            const { listeners } = screens[name].props;\n            return listeners;\n          }),\n        ].map((listeners) => {\n          const map =\n            typeof listeners === 'function'\n              ? listeners({ route: route as any, navigation })\n              : listeners;\n\n          return map\n            ? Object.keys(map)\n                .filter((type) => type === e.type)\n                .map((type) => map?.[type])\n            : undefined;\n        })\n      )\n      // We don't want same listener to be called multiple times for same event\n      // So we remove any duplicate functions from the array\n      .filter((cb, i, self) => cb && self.lastIndexOf(cb) === i);\n\n    listeners.forEach((listener) => listener?.(e));\n  });\n\n  useFocusEvents({ state, emitter });\n\n  React.useEffect(() => {\n    emitter.emit({ type: 'state', data: { state } });\n  }, [emitter, state]);\n\n  const { listeners: childListeners, addListener } = useChildListeners();\n\n  const { keyedListeners, addKeyedListener } = useKeyedChildListeners();\n\n  const onAction = useOnAction({\n    router,\n    getState,\n    setState,\n    key: route?.key,\n    actionListeners: childListeners.action,\n    beforeRemoveListeners: keyedListeners.beforeRemove,\n    routerConfigOptions: {\n      routeNames,\n      routeParamList,\n      routeGetIdList,\n    },\n    emitter,\n  });\n\n  const onRouteFocus = useOnRouteFocus({\n    router,\n    key: route?.key,\n    getState,\n    setState,\n  });\n\n  const navigation = useNavigationHelpers<\n    State,\n    ActionHelpers,\n    NavigationAction,\n    EventMap\n  >({\n    id: options.id,\n    onAction,\n    getState,\n    emitter,\n    router,\n  });\n\n  useFocusedListenersChildrenAdapter({\n    navigation,\n    focusedListeners: childListeners.focus,\n  });\n\n  useOnGetState({\n    getState,\n    getStateListeners: keyedListeners.getState,\n  });\n\n  const descriptors = useDescriptors<\n    State,\n    ActionHelpers,\n    ScreenOptions,\n    EventMap\n  >({\n    state,\n    screens,\n    navigation,\n    screenOptions: options.screenOptions,\n    defaultScreenOptions: options.defaultScreenOptions,\n    onAction,\n    getState,\n    setState,\n    onRouteFocus,\n    addListener,\n    addKeyedListener,\n    router,\n    // @ts-expect-error: this should have both core and custom events, but too much work right now\n    emitter,\n  });\n\n  useCurrentRender({\n    state,\n    navigation,\n    descriptors,\n  });\n\n  const NavigationContent = useComponent((children: React.ReactNode) => (\n    <NavigationHelpersContext.Provider value={navigation}>\n      <PreventRemoveProvider>{children}</PreventRemoveProvider>\n    </NavigationHelpersContext.Provider>\n  ));\n\n  return {\n    state,\n    navigation,\n    descriptors,\n    NavigationContent,\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}