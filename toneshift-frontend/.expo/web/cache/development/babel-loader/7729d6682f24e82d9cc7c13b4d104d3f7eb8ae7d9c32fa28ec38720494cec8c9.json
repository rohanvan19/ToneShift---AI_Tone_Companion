{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\vanma\\\\StudioProjects\\\\ToneShift\\\\toneshift-frontend\\\\screens\\\\conversation\\\\ConversationListScreen.js\",\n  _this = this;\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { Text, Card, FAB, ActivityIndicator, TextInput, IconButton, Menu, Portal, Dialog, Button } from 'react-native-paper';\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport { conversationApi } from '../../utils/api';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { useTheme } from '../../utils/ThemeContext';\nimport { useFocusEffect } from '@react-navigation/native';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar ConversationListScreen = function ConversationListScreen(_ref) {\n  var navigation = _ref.navigation;\n  var _useTheme = useTheme(),\n    theme = _useTheme.theme;\n  var colors = theme.colors,\n    spacing = theme.spacing,\n    fonts = theme.fonts,\n    shadows = theme.shadows,\n    borderRadius = theme.borderRadius;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    selectedConversation = _useState2[0],\n    setSelectedConversation = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    menuVisible = _useState4[0],\n    setMenuVisible = _useState4[1];\n  var _useState5 = useState({\n      x: 0,\n      y: 0\n    }),\n    _useState6 = _slicedToArray(_useState5, 2),\n    menuPosition = _useState6[0],\n    setMenuPosition = _useState6[1];\n  var _useState7 = useState(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    renameDialogVisible = _useState8[0],\n    setRenameDialogVisible = _useState8[1];\n  var _useState9 = useState(''),\n    _useState0 = _slicedToArray(_useState9, 2),\n    newTitle = _useState0[0],\n    setNewTitle = _useState0[1];\n  var _useState1 = useState([]),\n    _useState10 = _slicedToArray(_useState1, 2),\n    conversations = _useState10[0],\n    setConversations = _useState10[1];\n  var _useState11 = useState(true),\n    _useState12 = _slicedToArray(_useState11, 2),\n    loading = _useState12[0],\n    setLoading = _useState12[1];\n  var _useState13 = useState(null),\n    _useState14 = _slicedToArray(_useState13, 2),\n    error = _useState14[0],\n    setError = _useState14[1];\n  var _useState15 = useState(''),\n    _useState16 = _slicedToArray(_useState15, 2),\n    searchQuery = _useState16[0],\n    setSearchQuery = _useState16[1];\n  var _useState17 = useState([]),\n    _useState18 = _slicedToArray(_useState17, 2),\n    filteredConversations = _useState18[0],\n    setFilteredConversations = _useState18[1];\n  var styles = StyleSheet.create({\n    container: {\n      flex: 1,\n      backgroundColor: colors.background\n    },\n    centered: {\n      flex: 1,\n      justifyContent: 'center',\n      alignItems: 'center',\n      padding: spacing.l\n    },\n    searchContainer: {\n      margin: spacing.m\n    },\n    searchBar: _objectSpread({\n      backgroundColor: colors.surface,\n      borderRadius: borderRadius.large,\n      height: 50\n    }, shadows.small),\n    listContent: {\n      padding: spacing.m,\n      paddingBottom: spacing.xxxl\n    },\n    card: _objectSpread(_objectSpread({\n      marginBottom: spacing.m,\n      backgroundColor: colors.card,\n      borderRadius: borderRadius.large,\n      overflow: 'hidden'\n    }, shadows.medium), {}, {\n      borderWidth: 1,\n      borderColor: colors.border\n    }),\n    conversationTitle: _objectSpread(_objectSpread({}, fonts.semiBold), {}, {\n      fontSize: fonts.sizes.large,\n      marginBottom: spacing.xs,\n      color: colors.text\n    }),\n    lastMessage: _objectSpread(_objectSpread({}, fonts.regular), {}, {\n      color: colors.textSecondary,\n      marginBottom: spacing.s,\n      lineHeight: 20\n    }),\n    timestamp: _objectSpread(_objectSpread({}, fonts.medium), {}, {\n      color: colors.textSecondary,\n      fontSize: fonts.sizes.xs,\n      alignSelf: 'flex-end'\n    }),\n    errorText: {\n      color: colors.error,\n      textAlign: 'center',\n      marginBottom: spacing.m\n    },\n    retryButton: {\n      padding: spacing.m,\n      backgroundColor: colors.primary,\n      borderRadius: borderRadius.medium\n    },\n    retryText: _objectSpread({\n      color: '#fff'\n    }, fonts.medium),\n    emptyContainer: {\n      flex: 1,\n      justifyContent: 'center',\n      alignItems: 'center',\n      padding: spacing.l\n    },\n    emptyText: _objectSpread(_objectSpread({}, fonts.medium), {}, {\n      fontSize: fonts.sizes.large,\n      marginBottom: spacing.s,\n      color: colors.text\n    }),\n    emptySubtext: {\n      color: colors.textSecondary,\n      textAlign: 'center'\n    },\n    fab: _objectSpread(_objectSpread({\n      position: 'absolute',\n      margin: spacing.m,\n      right: 0,\n      bottom: 0,\n      backgroundColor: colors.primary,\n      borderRadius: borderRadius.round\n    }, shadows.large), {}, {\n      width: 60,\n      height: 60\n    }),\n    dialogInput: {\n      backgroundColor: colors.surface,\n      borderRadius: borderRadius.medium,\n      marginTop: spacing.s,\n      borderColor: colors.border\n    },\n    dialogTitle: _objectSpread(_objectSpread({}, fonts.semiBold), {}, {\n      color: colors.text\n    }),\n    dialogButton: {\n      borderRadius: borderRadius.medium,\n      paddingHorizontal: spacing.m\n    },\n    cardActions: {\n      position: 'absolute',\n      top: spacing.xs,\n      right: spacing.xs,\n      zIndex: 1\n    }\n  });\n  useEffect(function () {\n    fetchConversations();\n  }, []);\n  useEffect(function () {\n    var checkAuth = function () {\n      var _ref2 = _asyncToGenerator(function* () {\n        var token = yield AsyncStorage.getItem('token');\n        console.log('Current auth token:', token ? 'Present' : 'Not found');\n      });\n      return function checkAuth() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    checkAuth();\n  }, []);\n  useEffect(function () {\n    if (conversations.length > 0) {\n      var filtered = conversations.filter(function (convo) {\n        return convo.title.toLowerCase().includes(searchQuery.toLowerCase());\n      });\n      setFilteredConversations(filtered);\n    }\n  }, [searchQuery, conversations]);\n  var fetchConversations = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      setLoading(true);\n      console.log('Fetching conversations...');\n      try {\n        var response = yield conversationApi.getAll();\n        console.log('API response:', response.data);\n        setConversations(response.data.conversations || []);\n        setFilteredConversations(response.data.conversations || []);\n        setError(null);\n      } catch (error) {\n        var _error$response;\n        console.error('Error fetching conversations:', error);\n        console.error('Error details:', ((_error$response = error.response) == null ? void 0 : _error$response.data) || error.message);\n        setError('Failed to load conversations. Please try again.');\n      } finally {\n        setLoading(false);\n      }\n    });\n    return function fetchConversations() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var handleConversationPress = function handleConversationPress(conversation) {\n    navigation.navigate('ConversationDetail', {\n      conversationId: conversation.id,\n      title: conversation.title\n    });\n  };\n  var handleCreateConversation = function () {\n    var _ref4 = _asyncToGenerator(function* () {\n      try {\n        var title = \"New Conversation\";\n        var response = yield conversationApi.create({\n          title: title,\n          context: ''\n        });\n        console.log('Conversation created:', response.data);\n        yield fetchConversations();\n        if (response.data && response.data.conversation) {\n          navigation.navigate('ConversationDetail', {\n            conversationId: response.data.conversation.id,\n            title: response.data.conversation.title\n          });\n        }\n      } catch (error) {\n        console.error('Error creating conversation:', error);\n        alert('Failed to create a new conversation. Please try again.');\n      }\n    });\n    return function handleCreateConversation() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  var handleRenameConversation = function () {\n    var _ref5 = _asyncToGenerator(function* () {\n      if (!newTitle.trim() || !selectedConversation) return;\n      try {\n        yield conversationApi.update(selectedConversation.id, {\n          title: newTitle.trim()\n        });\n        setConversations(conversations.map(function (conv) {\n          return conv.id === selectedConversation.id ? _objectSpread(_objectSpread({}, conv), {}, {\n            title: newTitle.trim()\n          }) : conv;\n        }));\n        if (searchQuery) {\n          setFilteredConversations(filteredConversations.map(function (conv) {\n            return conv.id === selectedConversation.id ? _objectSpread(_objectSpread({}, conv), {}, {\n              title: newTitle.trim()\n            }) : conv;\n          }));\n        }\n        setRenameDialogVisible(false);\n        setSelectedConversation(null);\n        setNewTitle('');\n      } catch (error) {\n        console.error('Error renaming conversation:', error);\n        Alert.alert('Error', 'Failed to rename conversation');\n      }\n    });\n    return function handleRenameConversation() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n  var handleConversationLongPress = function handleConversationLongPress(conversation, event) {\n    setSelectedConversation(conversation);\n    setMenuVisible(true);\n  };\n  var renderConversationItem = function renderConversationItem(_ref6) {\n    var item = _ref6.item;\n    var lastMessage = item.messages && item.messages.length > 0 ? item.messages[item.messages.length - 1] : null;\n    var formattedDate = new Date(item.updatedAt).toLocaleDateString();\n    return _jsxDEV(TouchableOpacity, {\n      onPress: function onPress() {\n        return navigation.navigate('ConversationDetail', {\n          conversationId: item.id,\n          title: item.title\n        });\n      },\n      onLongPress: function onLongPress(event) {\n        return handleConversationLongPress(item, event);\n      },\n      delayLongPress: 500,\n      children: _jsxDEV(Card, {\n        style: styles.card,\n        children: [_jsxDEV(View, {\n          style: styles.cardActions,\n          children: _jsxDEV(IconButton, {\n            icon: \"dots-vertical\",\n            size: 20,\n            onPress: function onPress() {\n              setSelectedConversation(item);\n              setMenuVisible(true);\n            },\n            color: colors.textSecondary\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 11\n        }, _this), _jsxDEV(Card.Content, {\n          children: [_jsxDEV(Text, {\n            style: styles.conversationTitle,\n            children: item.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 13\n          }, _this), lastMessage && _jsxDEV(Text, {\n            style: styles.lastMessage,\n            numberOfLines: 2,\n            children: lastMessage.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 15\n          }, _this), _jsxDEV(Text, {\n            style: styles.timestamp,\n            children: formattedDate\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 7\n    }, _this);\n  };\n  return _jsxDEV(SafeAreaView, {\n    style: styles.container,\n    children: [_jsxDEV(Portal, {\n      children: _jsxDEV(Dialog, {\n        visible: renameDialogVisible,\n        onDismiss: function onDismiss() {\n          return setRenameDialogVisible(false);\n        },\n        style: {\n          backgroundColor: colors.card,\n          borderRadius: borderRadius.large\n        },\n        children: [_jsxDEV(Dialog.Title, {\n          style: styles.dialogTitle,\n          children: \"Rename Conversation\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 11\n        }, _this), _jsxDEV(Dialog.Content, {\n          children: _jsxDEV(TextInput, {\n            label: \"Conversation Name\",\n            value: newTitle,\n            onChangeText: setNewTitle,\n            mode: \"outlined\",\n            style: styles.dialogInput,\n            autoFocus: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 11\n        }, _this), _jsxDEV(Dialog.Actions, {\n          children: [_jsxDEV(Button, {\n            onPress: function onPress() {\n              return setRenameDialogVisible(false);\n            },\n            style: styles.dialogButton,\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 13\n          }, _this), _jsxDEV(Button, {\n            onPress: handleRenameConversation,\n            mode: \"contained\",\n            style: styles.dialogButton,\n            buttonColor: colors.primary,\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 7\n    }, _this), _jsxDEV(Portal, {\n      children: _jsxDEV(Menu, {\n        visible: menuVisible,\n        onDismiss: function onDismiss() {\n          setMenuVisible(false);\n          setSelectedConversation(null);\n        },\n        contentStyle: {\n          backgroundColor: colors.card\n        },\n        anchor: {\n          x: 0,\n          y: 0\n        },\n        statusBarHeight: 0,\n        children: [_jsxDEV(Menu.Item, {\n          onPress: function onPress() {\n            setMenuVisible(false);\n            if (selectedConversation) {\n              setNewTitle(selectedConversation.title);\n              setRenameDialogVisible(true);\n            }\n          },\n          title: \"Rename\",\n          leadingIcon: \"pencil\",\n          dense: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 11\n        }, _this), _jsxDEV(Divider, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 11\n        }, _this), _jsxDEV(Menu.Item, {\n          onPress: function onPress() {\n            setMenuVisible(false);\n            if (selectedConversation) {\n              Alert.alert(\"Delete Conversation\", \"Are you sure you want to delete this conversation?\", [{\n                text: \"Cancel\",\n                style: \"cancel\"\n              }, {\n                text: \"Delete\",\n                style: \"destructive\",\n                onPress: function () {\n                  var _onPress = _asyncToGenerator(function* () {\n                    try {\n                      yield conversationApi.delete(selectedConversation.id);\n                      setConversations(conversations.filter(function (c) {\n                        return c.id !== selectedConversation.id;\n                      }));\n                      if (searchQuery) {\n                        setFilteredConversations(filteredConversations.filter(function (c) {\n                          return c.id !== selectedConversation.id;\n                        }));\n                      }\n                    } catch (error) {\n                      console.error('Error deleting conversation:', error);\n                      Alert.alert('Error', 'Failed to delete conversation');\n                    }\n                  });\n                  function onPress() {\n                    return _onPress.apply(this, arguments);\n                  }\n                  return onPress;\n                }()\n              }]);\n            }\n          },\n          title: \"Delete\",\n          leadingIcon: \"delete\",\n          dense: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 7\n    }, _this), _jsxDEV(View, {\n      style: styles.searchContainer,\n      children: _jsxDEV(TextInput, {\n        placeholder: \"Search conversations...\",\n        value: searchQuery,\n        onChangeText: function onChangeText(text) {\n          setSearchQuery(text);\n          if (text) {\n            var filtered = conversations.filter(function (conv) {\n              return conv.title.toLowerCase().includes(text.toLowerCase());\n            });\n            setFilteredConversations(filtered);\n          } else {\n            setFilteredConversations([]);\n          }\n        },\n        mode: \"outlined\",\n        style: styles.searchBar,\n        left: _jsxDEV(TextInput.Icon, {\n          icon: \"magnify\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 17\n        }, _this),\n        clearButtonMode: \"while-editing\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 407,\n      columnNumber: 7\n    }, _this), loading ? _jsxDEV(View, {\n      style: styles.centered,\n      children: _jsxDEV(ActivityIndicator, {\n        size: \"large\",\n        color: colors.primary\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 432,\n        columnNumber: 11\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 431,\n      columnNumber: 9\n    }, _this) : error ? _jsxDEV(View, {\n      style: styles.centered,\n      children: [_jsxDEV(Text, {\n        style: styles.errorText,\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 11\n      }, _this), _jsxDEV(TouchableOpacity, {\n        style: styles.retryButton,\n        onPress: fetchConversations,\n        children: _jsxDEV(Text, {\n          style: styles.retryText,\n          children: \"Retry\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 13\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 437,\n        columnNumber: 11\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 435,\n      columnNumber: 9\n    }, _this) : _jsxDEV(FlatList, {\n      data: searchQuery ? filteredConversations : conversations,\n      renderItem: renderConversationItem,\n      keyExtractor: function keyExtractor(item) {\n        return item.id;\n      },\n      contentContainerStyle: styles.listContent,\n      ListEmptyComponent: function ListEmptyComponent() {\n        return _jsxDEV(View, {\n          style: styles.emptyContainer,\n          children: [_jsxDEV(Text, {\n            style: styles.emptyText,\n            children: \"No conversations yet\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 450,\n            columnNumber: 15\n          }, _this), _jsxDEV(Text, {\n            style: styles.emptySubtext,\n            children: searchQuery ? 'No conversations match your search' : 'Create a new conversation to get started'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 451,\n            columnNumber: 15\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 449,\n          columnNumber: 13\n        }, _this);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 443,\n      columnNumber: 9\n    }, _this), _jsxDEV(FAB, {\n      style: styles.fab,\n      icon: \"plus\",\n      onPress: function onPress() {\n        navigation.navigate('ConversationDetail', {\n          isNew: true\n        });\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 462,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 305,\n    columnNumber: 5\n  }, _this);\n};\nexport default ConversationListScreen;","map":{"version":3,"names":["React","useState","useEffect","View","StyleSheet","FlatList","TouchableOpacity","Alert","Text","Card","FAB","ActivityIndicator","TextInput","IconButton","Menu","Portal","Dialog","Button","SafeAreaView","conversationApi","AsyncStorage","useTheme","useFocusEffect","jsxDEV","_jsxDEV","ConversationListScreen","_ref","navigation","_useTheme","theme","colors","spacing","fonts","shadows","borderRadius","_useState","_useState2","_slicedToArray","selectedConversation","setSelectedConversation","_useState3","_useState4","menuVisible","setMenuVisible","_useState5","x","y","_useState6","menuPosition","setMenuPosition","_useState7","_useState8","renameDialogVisible","setRenameDialogVisible","_useState9","_useState0","newTitle","setNewTitle","_useState1","_useState10","conversations","setConversations","_useState11","_useState12","loading","setLoading","_useState13","_useState14","error","setError","_useState15","_useState16","searchQuery","setSearchQuery","_useState17","_useState18","filteredConversations","setFilteredConversations","styles","create","container","flex","backgroundColor","background","centered","justifyContent","alignItems","padding","l","searchContainer","margin","m","searchBar","_objectSpread","surface","large","height","small","listContent","paddingBottom","xxxl","card","marginBottom","overflow","medium","borderWidth","borderColor","border","conversationTitle","semiBold","fontSize","sizes","xs","color","text","lastMessage","regular","textSecondary","s","lineHeight","timestamp","alignSelf","errorText","textAlign","retryButton","primary","retryText","emptyContainer","emptyText","emptySubtext","fab","position","right","bottom","round","width","dialogInput","marginTop","dialogTitle","dialogButton","paddingHorizontal","cardActions","top","zIndex","fetchConversations","checkAuth","_ref2","_asyncToGenerator","token","getItem","console","log","apply","arguments","length","filtered","filter","convo","title","toLowerCase","includes","_ref3","response","getAll","data","_error$response","message","handleConversationPress","conversation","navigate","conversationId","id","handleCreateConversation","_ref4","context","alert","handleRenameConversation","_ref5","trim","update","map","conv","handleConversationLongPress","event","renderConversationItem","_ref6","item","messages","formattedDate","Date","updatedAt","toLocaleDateString","onPress","onLongPress","delayLongPress","children","style","icon","size","fileName","_jsxFileName","lineNumber","columnNumber","_this","Content","numberOfLines","content","visible","onDismiss","Title","label","value","onChangeText","mode","autoFocus","Actions","buttonColor","contentStyle","anchor","statusBarHeight","Item","leadingIcon","dense","Divider","_onPress","delete","c","placeholder","left","Icon","clearButtonMode","renderItem","keyExtractor","contentContainerStyle","ListEmptyComponent","isNew"],"sources":["C:/Users/vanma/StudioProjects/ToneShift/toneshift-frontend/screens/conversation/ConversationListScreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { View, StyleSheet, FlatList, TouchableOpacity, Alert } from 'react-native';\r\nimport { Text, Card, FAB, ActivityIndicator, TextInput, IconButton, Menu, Portal, Dialog, Button } from 'react-native-paper';\r\nimport { SafeAreaView } from 'react-native-safe-area-context';\r\nimport { conversationApi } from '../../utils/api';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { useTheme } from '../../utils/ThemeContext';\r\nimport { useFocusEffect } from '@react-navigation/native';\r\n\r\nconst ConversationListScreen = ({ navigation }) => {\r\n  const { theme } = useTheme();\r\n  const { colors, spacing, fonts, shadows, borderRadius } = theme;\r\n  \r\n  // Add new state variables for rename functionality\r\n  const [selectedConversation, setSelectedConversation] = useState(null);\r\n  const [menuVisible, setMenuVisible] = useState(false);\r\n  const [menuPosition, setMenuPosition] = useState({ x: 0, y: 0 });\r\n  const [renameDialogVisible, setRenameDialogVisible] = useState(false);\r\n  const [newTitle, setNewTitle] = useState('');\r\n  \r\n  // Existing state variables\r\n  const [conversations, setConversations] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [filteredConversations, setFilteredConversations] = useState([]);\r\n  \r\n  // Move the styles definition here, before they're used in any conditionals\r\n  const styles = StyleSheet.create({\r\n    container: {\r\n      flex: 1,\r\n      backgroundColor: colors.background,\r\n    },\r\n    centered: {\r\n      flex: 1,\r\n      justifyContent: 'center',\r\n      alignItems: 'center',\r\n      padding: spacing.l,\r\n    },\r\n    searchContainer: {\r\n      margin: spacing.m,\r\n    },\r\n    searchBar: {\r\n      backgroundColor: colors.surface,\r\n      borderRadius: borderRadius.large,\r\n      height: 50,\r\n      ...shadows.small,\r\n    },\r\n    listContent: {\r\n      padding: spacing.m,\r\n      paddingBottom: spacing.xxxl, // Extra padding for FAB\r\n    },\r\n    card: {\r\n      marginBottom: spacing.m,\r\n      backgroundColor: colors.card,\r\n      borderRadius: borderRadius.large,\r\n      overflow: 'hidden',\r\n      ...shadows.medium,\r\n      borderWidth: 1,\r\n      borderColor: colors.border,\r\n    },\r\n    conversationTitle: {\r\n      ...fonts.semiBold,\r\n      fontSize: fonts.sizes.large,\r\n      marginBottom: spacing.xs,\r\n      color: colors.text,\r\n    },\r\n    lastMessage: {\r\n      ...fonts.regular,\r\n      color: colors.textSecondary,\r\n      marginBottom: spacing.s,\r\n      lineHeight: 20,\r\n    },\r\n    timestamp: {\r\n      ...fonts.medium,\r\n      color: colors.textSecondary,\r\n      fontSize: fonts.sizes.xs,\r\n      alignSelf: 'flex-end',\r\n    },\r\n    errorText: {\r\n      color: colors.error,\r\n      textAlign: 'center',\r\n      marginBottom: spacing.m,\r\n    },\r\n    retryButton: {\r\n      padding: spacing.m,\r\n      backgroundColor: colors.primary,\r\n      borderRadius: borderRadius.medium,\r\n    },\r\n    retryText: {\r\n      color: '#fff',\r\n      ...fonts.medium,\r\n    },\r\n    emptyContainer: {\r\n      flex: 1,\r\n      justifyContent: 'center',\r\n      alignItems: 'center',\r\n      padding: spacing.l,\r\n    },\r\n    emptyText: {\r\n      ...fonts.medium,\r\n      fontSize: fonts.sizes.large,\r\n      marginBottom: spacing.s,\r\n      color: colors.text,\r\n    },\r\n    emptySubtext: {\r\n      color: colors.textSecondary,\r\n      textAlign: 'center',\r\n    },\r\n    fab: {\r\n      position: 'absolute',\r\n      margin: spacing.m,\r\n      right: 0,\r\n      bottom: 0,\r\n      backgroundColor: colors.primary,\r\n      borderRadius: borderRadius.round,\r\n      ...shadows.large,\r\n      width: 60,\r\n      height: 60,\r\n    },\r\n    dialogInput: {\r\n      backgroundColor: colors.surface,\r\n      borderRadius: borderRadius.medium,\r\n      marginTop: spacing.s,\r\n      borderColor: colors.border,\r\n    },\r\n    dialogTitle: {\r\n      ...fonts.semiBold,\r\n      color: colors.text,\r\n    },\r\n    dialogButton: {\r\n      borderRadius: borderRadius.medium,\r\n      paddingHorizontal: spacing.m,\r\n    },\r\n    cardActions: {\r\n      position: 'absolute',\r\n      top: spacing.xs,\r\n      right: spacing.xs,\r\n      zIndex: 1,\r\n    },\r\n  });\r\n  \r\n  useEffect(() => {\r\n    fetchConversations();\r\n  }, []);\r\n\r\n  // Add this at the top of your component\r\n  useEffect(() => {\r\n    // Debug authentication\r\n    const checkAuth = async () => {\r\n      const token = await AsyncStorage.getItem('token');\r\n      console.log('Current auth token:', token ? 'Present' : 'Not found');\r\n    };\r\n    checkAuth();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (conversations.length > 0) {\r\n      const filtered = conversations.filter(convo => \r\n        convo.title.toLowerCase().includes(searchQuery.toLowerCase())\r\n      );\r\n      setFilteredConversations(filtered);\r\n    }\r\n  }, [searchQuery, conversations]);\r\n\r\n  const fetchConversations = async () => {\r\n    setLoading(true);\r\n    console.log('Fetching conversations...');\r\n    try {\r\n      const response = await conversationApi.getAll();\r\n      console.log('API response:', response.data);\r\n      setConversations(response.data.conversations || []);\r\n      setFilteredConversations(response.data.conversations || []);\r\n      setError(null);\r\n    } catch (error) {\r\n      console.error('Error fetching conversations:', error);\r\n      console.error('Error details:', error.response?.data || error.message);\r\n      setError('Failed to load conversations. Please try again.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleConversationPress = (conversation) => {\r\n    navigation.navigate('ConversationDetail', { \r\n      conversationId: conversation.id,\r\n      title: conversation.title\r\n    });\r\n  };\r\n\r\n  const handleCreateConversation = async () => {\r\n    try {\r\n      // Create a new conversation with a default title\r\n      // You could add a modal here to let the user enter a title\r\n      const title = \"New Conversation\";\r\n      const response = await conversationApi.create({\r\n        title,\r\n        context: '', // Optional context\r\n      });\r\n      \r\n      console.log('Conversation created:', response.data);\r\n      \r\n      // Refresh the conversation list\r\n      await fetchConversations();\r\n      \r\n      // Navigate to the new conversation\r\n      if (response.data && response.data.conversation) {\r\n        navigation.navigate('ConversationDetail', {\r\n          conversationId: response.data.conversation.id,\r\n          title: response.data.conversation.title\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error creating conversation:', error);\r\n      // Show error to user\r\n      alert('Failed to create a new conversation. Please try again.');\r\n    }\r\n  };\r\n\r\n  // Add function to handle conversation rename\r\n  const handleRenameConversation = async () => {\r\n    if (!newTitle.trim() || !selectedConversation) return;\r\n    \r\n    try {\r\n      await conversationApi.update(selectedConversation.id, {\r\n        title: newTitle.trim()\r\n      });\r\n      \r\n      // Update the local state\r\n      setConversations(conversations.map(conv => \r\n        conv.id === selectedConversation.id \r\n          ? { ...conv, title: newTitle.trim() } \r\n          : conv\r\n      ));\r\n      \r\n      // Update filtered conversations too if search is active\r\n      if (searchQuery) {\r\n        setFilteredConversations(filteredConversations.map(conv => \r\n          conv.id === selectedConversation.id \r\n            ? { ...conv, title: newTitle.trim() } \r\n            : conv\r\n        ));\r\n      }\r\n      \r\n      // Reset state\r\n      setRenameDialogVisible(false);\r\n      setSelectedConversation(null);\r\n      setNewTitle('');\r\n    } catch (error) {\r\n      console.error('Error renaming conversation:', error);\r\n      Alert.alert('Error', 'Failed to rename conversation');\r\n    }\r\n  };\r\n  \r\n  // Add function to handle conversation selection for menu\r\n  const handleConversationLongPress = (conversation, event) => {\r\n    setSelectedConversation(conversation);\r\n    setMenuVisible(true);\r\n  };\r\n  \r\n  // Update the renderItem function to include long press menu\r\n  const renderConversationItem = ({ item }) => {\r\n    const lastMessage = item.messages && item.messages.length > 0 \r\n      ? item.messages[item.messages.length - 1] \r\n      : null;\r\n    \r\n    const formattedDate = new Date(item.updatedAt).toLocaleDateString();\r\n    \r\n    return (\r\n      <TouchableOpacity\r\n        onPress={() => navigation.navigate('ConversationDetail', { \r\n          conversationId: item.id,\r\n          title: item.title\r\n        })}\r\n        onLongPress={(event) => handleConversationLongPress(item, event)}\r\n        delayLongPress={500}\r\n      >\r\n        <Card style={styles.card}>\r\n          <View style={styles.cardActions}>\r\n            <IconButton\r\n              icon=\"dots-vertical\"\r\n              size={20}\r\n              onPress={() => {\r\n                setSelectedConversation(item);\r\n                setMenuVisible(true);\r\n              }}\r\n              color={colors.textSecondary}\r\n            />\r\n          </View>\r\n          <Card.Content>\r\n            <Text style={styles.conversationTitle}>{item.title}</Text>\r\n            {lastMessage && (\r\n              <Text style={styles.lastMessage} numberOfLines={2}>\r\n                {lastMessage.content}\r\n              </Text>\r\n            )}\r\n            <Text style={styles.timestamp}>{formattedDate}</Text>\r\n          </Card.Content>\r\n        </Card>\r\n      </TouchableOpacity>\r\n    );\r\n  };\r\n  \r\n  return (\r\n    <SafeAreaView style={styles.container}>\r\n      {/* Rename Dialog */}\r\n      <Portal>\r\n        <Dialog\r\n          visible={renameDialogVisible}\r\n          onDismiss={() => setRenameDialogVisible(false)}\r\n          style={{ backgroundColor: colors.card, borderRadius: borderRadius.large }}\r\n        >\r\n          <Dialog.Title style={styles.dialogTitle}>Rename Conversation</Dialog.Title>\r\n          <Dialog.Content>\r\n            <TextInput\r\n              label=\"Conversation Name\"\r\n              value={newTitle}\r\n              onChangeText={setNewTitle}\r\n              mode=\"outlined\"\r\n              style={styles.dialogInput}\r\n              autoFocus\r\n            />\r\n          </Dialog.Content>\r\n          <Dialog.Actions>\r\n            <Button \r\n              onPress={() => setRenameDialogVisible(false)}\r\n              style={styles.dialogButton}\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button \r\n              onPress={handleRenameConversation} \r\n              mode=\"contained\"\r\n              style={styles.dialogButton}\r\n              buttonColor={colors.primary}\r\n            >\r\n              Save\r\n            </Button>\r\n          </Dialog.Actions>\r\n        </Dialog>\r\n      </Portal>\r\n      \r\n      {/* Context Menu */}\r\n      <Portal>\r\n        <Menu\r\n          visible={menuVisible}\r\n          onDismiss={() => {\r\n            setMenuVisible(false);\r\n            setSelectedConversation(null);\r\n          }}\r\n          contentStyle={{ backgroundColor: colors.card }}\r\n          anchor={{ x: 0, y: 0 }}\r\n          statusBarHeight={0}\r\n        >\r\n          <Menu.Item\r\n            onPress={() => {\r\n              setMenuVisible(false);\r\n              if (selectedConversation) {\r\n                setNewTitle(selectedConversation.title);\r\n                setRenameDialogVisible(true);\r\n              }\r\n            }}\r\n            title=\"Rename\"\r\n            leadingIcon=\"pencil\"\r\n            dense\r\n          />\r\n          <Divider />\r\n          <Menu.Item\r\n            onPress={() => {\r\n              setMenuVisible(false);\r\n              // Handle delete conversation here\r\n              if (selectedConversation) {\r\n                Alert.alert(\r\n                  \"Delete Conversation\",\r\n                  \"Are you sure you want to delete this conversation?\",\r\n                  [\r\n                    { text: \"Cancel\", style: \"cancel\" },\r\n                    { \r\n                      text: \"Delete\", \r\n                      style: \"destructive\",\r\n                      onPress: async () => {\r\n                        try {\r\n                          await conversationApi.delete(selectedConversation.id);\r\n                          // Remove from list\r\n                          setConversations(conversations.filter(c => c.id !== selectedConversation.id));\r\n                          if (searchQuery) {\r\n                            setFilteredConversations(filteredConversations.filter(c => c.id !== selectedConversation.id));\r\n                          }\r\n                        } catch (error) {\r\n                          console.error('Error deleting conversation:', error);\r\n                          Alert.alert('Error', 'Failed to delete conversation');\r\n                        }\r\n                      }\r\n                    }\r\n                  ]\r\n                );\r\n              }\r\n            }}\r\n            title=\"Delete\"\r\n            leadingIcon=\"delete\"\r\n            dense\r\n          />\r\n        </Menu>\r\n      </Portal>\r\n      \r\n      {/* Search input */}\r\n      <View style={styles.searchContainer}>\r\n        <TextInput\r\n          placeholder=\"Search conversations...\"\r\n          value={searchQuery}\r\n          onChangeText={text => {\r\n            setSearchQuery(text);\r\n            if (text) {\r\n              const filtered = conversations.filter(conv => \r\n                conv.title.toLowerCase().includes(text.toLowerCase())\r\n              );\r\n              setFilteredConversations(filtered);\r\n            } else {\r\n              setFilteredConversations([]);\r\n            }\r\n          }}\r\n          mode=\"outlined\"\r\n          style={styles.searchBar}\r\n          left={<TextInput.Icon icon=\"magnify\" />}\r\n          clearButtonMode=\"while-editing\"\r\n        />\r\n      </View>\r\n\r\n      {/* Loading and error states */}\r\n      {loading ? (\r\n        <View style={styles.centered}>\r\n          <ActivityIndicator size=\"large\" color={colors.primary} />\r\n        </View>\r\n      ) : error ? (\r\n        <View style={styles.centered}>\r\n          <Text style={styles.errorText}>{error}</Text>\r\n          <TouchableOpacity style={styles.retryButton} onPress={fetchConversations}>\r\n            <Text style={styles.retryText}>Retry</Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n      ) : (\r\n        // Conversation list\r\n        <FlatList\r\n          data={searchQuery ? filteredConversations : conversations}\r\n          renderItem={renderConversationItem}\r\n          keyExtractor={(item) => item.id}\r\n          contentContainerStyle={styles.listContent}\r\n          ListEmptyComponent={() => (\r\n            <View style={styles.emptyContainer}>\r\n              <Text style={styles.emptyText}>No conversations yet</Text>\r\n              <Text style={styles.emptySubtext}>\r\n                {searchQuery \r\n                  ? 'No conversations match your search' \r\n                  : 'Create a new conversation to get started'}\r\n              </Text>\r\n            </View>\r\n          )}\r\n        />\r\n      )}\r\n\r\n      {/* FAB for creating new conversations */}\r\n      <FAB\r\n        style={styles.fab}\r\n        icon=\"plus\"\r\n        onPress={() => {\r\n          // Navigate to create new conversation\r\n          navigation.navigate('ConversationDetail', { isNew: true });\r\n        }}\r\n      />\r\n    </SafeAreaView>\r\n  );\r\n};\r\n\r\nexport default ConversationListScreen;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}