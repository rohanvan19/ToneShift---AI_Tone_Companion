{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport axios from 'axios';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nvar API_URL = 'http://localhost:5000/api';\nvar api = axios.create({\n  baseURL: API_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\napi.interceptors.request.use(function () {\n  var _ref = _asyncToGenerator(function* (config) {\n    var token = yield AsyncStorage.getItem('token');\n    console.log('API Request to:', config.url);\n    console.log('Token available:', token ? 'YES' : 'NO');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n      console.log('Authorization header set');\n    }\n    return config;\n  });\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}(), function (error) {\n  return Promise.reject(error);\n});\napi.interceptors.response.use(function (response) {\n  console.log('API Response status:', response.status);\n  return response;\n}, function (error) {\n  var _error$response, _error$response2;\n  console.error('API Error:', (_error$response = error.response) == null ? void 0 : _error$response.status, (_error$response2 = error.response) == null ? void 0 : _error$response2.data);\n  return Promise.reject(error);\n});\nexport var authApi = {\n  register: function register(userData) {\n    return api.post('/users/register', userData);\n  },\n  login: function login(credentials) {\n    return api.post('/users/login', credentials);\n  },\n  getProfile: function getProfile() {\n    return api.get('/users/profile');\n  },\n  updateProfile: function updateProfile(data) {\n    return api.put('/users/profile', data);\n  }\n};\nexport var conversationApi = {\n  getAll: function getAll() {\n    return api.get('/conversations');\n  },\n  getById: function getById(id) {\n    return api.get(`/conversations/${id}`);\n  },\n  create: function create(data) {\n    return api.post('/conversations', data);\n  },\n  update: function () {\n    var _update = _asyncToGenerator(function* (id, data) {\n      var token = yield AsyncStorage.getItem('token');\n      return axios.put(`${API_URL}/conversations/${id}`, data, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n    });\n    function update(_x2, _x3) {\n      return _update.apply(this, arguments);\n    }\n    return update;\n  }(),\n  delete: function () {\n    var _delete2 = _asyncToGenerator(function* (id) {\n      var token = yield AsyncStorage.getItem('token');\n      return axios.delete(`${API_URL}/conversations/${id}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n    });\n    function _delete(_x4) {\n      return _delete2.apply(this, arguments);\n    }\n    return _delete;\n  }(),\n  addMessage: function addMessage(id, data) {\n    return api.post(`/conversations/${id}/messages`, data);\n  }\n};\nexport var relationshipApi = {\n  getAll: function getAll() {\n    return api.get('/relationships');\n  },\n  getById: function getById(id) {\n    return api.get(`/relationships/${id}`);\n  },\n  create: function create(data) {\n    return api.post('/relationships', data);\n  },\n  update: function update(id, data) {\n    return api.put(`/relationships/${id}`, data);\n  },\n  delete: function _delete(id) {\n    return api.delete(`/relationships/${id}`);\n  }\n};\nexport var toneApi = {\n  getAll: function getAll() {\n    return api.get('/tones');\n  },\n  create: function create(data) {\n    return api.post('/tones', data);\n  },\n  update: function update(id, data) {\n    return api.put(`/tones/${id}`, data);\n  },\n  delete: function _delete(id) {\n    return api.delete(`/tones/${id}`);\n  },\n  getPreferred: function getPreferred() {\n    return api.get('/tones/preferred');\n  },\n  updatePreferred: function updatePreferred(data) {\n    return api.put('/tones/preferred', data);\n  }\n};\nexport var responseApi = {\n  generate: function generate(data) {\n    return api.post('/responses/generate', data);\n  },\n  generateMultiple: function generateMultiple(data) {\n    return api.post('/responses/generate-multiple', data);\n  },\n  generateAndSave: function generateAndSave(data) {\n    return api.post('/responses/generate-and-save', data);\n  }\n};\nexport default api;","map":{"version":3,"names":["axios","AsyncStorage","API_URL","api","create","baseURL","headers","interceptors","request","use","_ref","_asyncToGenerator","config","token","getItem","console","log","url","Authorization","_x","apply","arguments","error","Promise","reject","response","status","_error$response","_error$response2","data","authApi","register","userData","post","login","credentials","getProfile","get","updateProfile","put","conversationApi","getAll","getById","id","update","_update","_x2","_x3","delete","_delete2","_x4","addMessage","relationshipApi","toneApi","getPreferred","updatePreferred","responseApi","generate","generateMultiple","generateAndSave"],"sources":["C:/Users/vanma/StudioProjects/ToneShift/toneshift-frontend/utils/api.js"],"sourcesContent":["import axios from 'axios';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\n\r\n// Base URL for API requests\r\n\r\nconst API_URL = 'http://localhost:5000/api';\r\n\r\n// Create axios instance\r\nconst api = axios.create({\r\n  baseURL: API_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\n// Add request interceptor to include token in headers\r\napi.interceptors.request.use(\r\n  async (config) => {\r\n    const token = await AsyncStorage.getItem('token');\r\n    console.log('API Request to:', config.url);\r\n    console.log('Token available:', token ? 'YES' : 'NO');\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n      console.log('Authorization header set');\r\n    }\r\n    return config;\r\n  },\r\n  (error) => Promise.reject(error)\r\n);\r\n\r\napi.interceptors.response.use(\r\n  (response) => {\r\n    console.log('API Response status:', response.status);\r\n    return response;\r\n  },\r\n  (error) => {\r\n    console.error('API Error:', error.response?.status, error.response?.data);\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport const authApi = {\r\n  register: (userData) => api.post('/users/register', userData),\r\n  login: (credentials) => api.post('/users/login', credentials),\r\n  getProfile: () => api.get('/users/profile'),\r\n  updateProfile: (data) => api.put('/users/profile', data),\r\n};\r\n\r\nexport const conversationApi = {\r\n  getAll: () => api.get('/conversations'),\r\n  getById: (id) => api.get(`/conversations/${id}`),\r\n  create: (data) => api.post('/conversations', data),\r\n  update: async (id, data) => {\r\n    const token = await AsyncStorage.getItem('token');\r\n    return axios.put(`${API_URL}/conversations/${id}`, data, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`\r\n      }\r\n    });\r\n  },\r\n  delete: async (id) => {\r\n    const token = await AsyncStorage.getItem('token');\r\n    return axios.delete(`${API_URL}/conversations/${id}`, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`\r\n      }\r\n    });\r\n  },\r\n  addMessage: (id, data) => api.post(`/conversations/${id}/messages`, data),\r\n};\r\n\r\nexport const relationshipApi = {\r\n  getAll: () => api.get('/relationships'),\r\n  getById: (id) => api.get(`/relationships/${id}`),\r\n  create: (data) => api.post('/relationships', data),\r\n  update: (id, data) => api.put(`/relationships/${id}`, data),\r\n  delete: (id) => api.delete(`/relationships/${id}`),\r\n};\r\n\r\nexport const toneApi = {\r\n  getAll: () => api.get('/tones'),\r\n  create: (data) => api.post('/tones', data),\r\n  update: (id, data) => api.put(`/tones/${id}`, data),\r\n  delete: (id) => api.delete(`/tones/${id}`),\r\n  getPreferred: () => api.get('/tones/preferred'),\r\n  updatePreferred: (data) => api.put('/tones/preferred', data),\r\n};\r\n\r\nexport const responseApi = {\r\n  generate: (data) => api.post('/responses/generate', data),\r\n  generateMultiple: (data) => api.post('/responses/generate-multiple', data),\r\n  generateAndSave: (data) => api.post('/responses/generate-and-save', data),\r\n};\r\n\r\nexport default api;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}